!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.JsMediaSDK_Instance=t():e.JsMediaSDK_Instance=t()}(window,function(){return function(e){var t={};function i(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,o){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(o,r,function(t){return e[t]}.bind(null,r));return o},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=146)}([function(e,t){var i=e.exports={version:"2.5.7"};"number"==typeof __e&&(__e=i)},function(e,t,i){var o=i(39)("wks"),r=i(25),n=i(2).Symbol,a="function"==typeof n;(e.exports=function(e){return o[e]||(o[e]=a&&n[e]||(a?n:r)("Symbol."+e))}).store=o},function(e,t){var i=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},function(e,t,i){var o=i(2),r=i(0),n=i(9),a=i(8),u=i(11),s=function(e,t,i){var c,d,l,f=e&s.F,h=e&s.G,_=e&s.S,p=e&s.P,v=e&s.B,A=e&s.W,S=h?r:r[t]||(r[t]={}),E=S.prototype,g=h?o:_?o[t]:(o[t]||{}).prototype;for(c in h&&(i=t),i)(d=!f&&g&&void 0!==g[c])&&u(S,c)||(l=d?g[c]:i[c],S[c]=h&&"function"!=typeof g[c]?i[c]:v&&d?n(l,o):A&&g[c]==l?function(e){var t=function(t,i,o){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,i)}return new e(t,i,o)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(l):p&&"function"==typeof l?n(Function.call,l):l,p&&((S.virtual||(S.virtual={}))[c]=l,e&s.R&&E&&!E[c]&&a(E,c,l)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},function(e,t,i){var o=i(7),r=i(73),n=i(46),a=Object.defineProperty;t.f=i(5)?Object.defineProperty:function(e,t,i){if(o(e),t=n(t,!0),o(i),r)try{return a(e,t,i)}catch(e){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(e[t]=i.value),e}},function(e,t,i){e.exports=!i(10)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,i){var o=i(6);e.exports=function(e){if(!o(e))throw TypeError(e+" is not an object!");return e}},function(e,t,i){var o=i(4),r=i(20);e.exports=i(5)?function(e,t,i){return o.f(e,t,r(1,i))}:function(e,t,i){return e[t]=i,e}},function(e,t,i){var o=i(19);e.exports=function(e,t,i){if(o(e),void 0===t)return e;switch(i){case 1:return function(i){return e.call(t,i)};case 2:return function(i,o){return e.call(t,i,o)};case 3:return function(i,o,r){return e.call(t,i,o,r)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){var i={}.hasOwnProperty;e.exports=function(e,t){return i.call(e,t)}},function(e,t,i){var o=i(48),r=i(47);e.exports=function(e){return o(r(e))}},function(e,t){e.exports={}},function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}}},function(e,t,i){var o=i(9),r=i(67),n=i(66),a=i(7),u=i(26),s=i(65),c={},d={};(t=e.exports=function(e,t,i,l,f){var h,_,p,v,A=f?function(){return e}:s(e),S=o(i,l,t?2:1),E=0;if("function"!=typeof A)throw TypeError(e+" is not iterable!");if(n(A)){for(h=u(e.length);h>E;E++)if((v=t?S(a(_=e[E])[0],_[1]):S(e[E]))===c||v===d)return v}else for(p=A.call(e);!(_=p.next()).done;)if((v=r(p,S,_.value,t))===c||v===d)return v}).BREAK=c,t.RETURN=d},function(e,t,i){var o=i(4).f,r=i(11),n=i(1)("toStringTag");e.exports=function(e,t,i){e&&!r(e=i?e:e.prototype,n)&&o(e,n,{configurable:!0,value:t})}},function(e,t){e.exports=!0},function(e,t,i){"use strict";var o=i(136)(!0);i(42)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,i=this._i;return i>=t.length?{value:void 0,done:!0}:(e=o(t,i),this._i+=e.length,{value:e,done:!1})})},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var i={}.toString;e.exports=function(e){return i.call(e).slice(8,-1)}},function(e,t,i){var o=i(21),r=i(1)("toStringTag"),n="Arguments"==o(function(){return arguments}());e.exports=function(e){var t,i,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(i=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),r))?i:n?o(t):"Object"==(a=o(t))&&"function"==typeof t.callee?"Arguments":a}},function(e,t,i){i(130);for(var o=i(2),r=i(8),n=i(13),a=i(1)("toStringTag"),u="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),s=0;s<u.length;s++){var c=u[s],d=o[c],l=d&&d.prototype;l&&!l[a]&&r(l,a,c),n[c]=n.Array}},function(e,t,i){var o=i(47);e.exports=function(e){return Object(o(e))}},function(e,t){var i=0,o=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++i+o).toString(36))}},function(e,t,i){var o=i(43),r=Math.min;e.exports=function(e){return e>0?r(o(e),9007199254740991):0}},function(e,t,i){var o=i(70),r=i(38);e.exports=Object.keys||function(e){return o(e,r)}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CurrentSSRCTime=t.CurrentSSRC=t.AudioNode=void 0,t.AudioNode=null,t.CurrentSSRC=0,t.CurrentSSRCTime=0},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={getDocumentHandle:function(e){return document.getElementById(e)},browser:{isFirefox:"undefined"!=typeof InstallTrigger,isChrome:!!window.chrome&&!!window.chrome.webstore,isEdge:window.navigator.userAgent.indexOf("Edge")>-1,isSafari:/constructor/i.test(window.HTMLElement)||"[object SafariRemoteNotification]"===(!window.safari||safari.pushNotification).toString()}};t.default=o},function(e,t,i){var o=i(2),r=i(0),n=i(17),a=i(33),u=i(4).f;e.exports=function(e){var t=r.Symbol||(r.Symbol=n?{}:o.Symbol||{});"_"==e.charAt(0)||e in t||u(t,e,{value:a.f(e)})}},function(e,t,i){var o=i(25)("meta"),r=i(6),n=i(11),a=i(4).f,u=0,s=Object.isExtensible||function(){return!0},c=!i(10)(function(){return s(Object.preventExtensions({}))}),d=function(e){a(e,o,{value:{i:"O"+ ++u,w:{}}})},l=e.exports={KEY:o,NEED:!1,fastKey:function(e,t){if(!r(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!n(e,o)){if(!s(e))return"F";if(!t)return"E";d(e)}return e[o].i},getWeak:function(e,t){if(!n(e,o)){if(!s(e))return!0;if(!t)return!1;d(e)}return e[o].w},onFreeze:function(e){return c&&l.NEED&&s(e)&&!n(e,o)&&d(e),e}}},function(e,t,i){t.f=i(1)},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,i){var o=i(8);e.exports=function(e,t,i){for(var r in t)i&&e[r]?e[r]=t[r]:o(e,r,t[r]);return e}},function(e,t,i){"use strict";var o=i(19);e.exports.f=function(e){return new function(e){var t,i;this.promise=new e(function(e,o){if(void 0!==t||void 0!==i)throw TypeError("Bad Promise constructor");t=e,i=o}),this.resolve=o(t),this.reject=o(i)}(e)}},function(e,t){e.exports=function(e,t,i,o){if(!(e instanceof t)||void 0!==o&&o in e)throw TypeError(i+": incorrect invocation!");return e}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,i){var o=i(0),r=i(2),n=r["__core-js_shared__"]||(r["__core-js_shared__"]={});(e.exports=function(e,t){return n[e]||(n[e]=void 0!==t?t:{})})("versions",[]).push({version:o.version,mode:i(17)?"pure":"global",copyright:"Â© 2018 Denis Pushkarev (zloirock.ru)"})},function(e,t,i){var o=i(39)("keys"),r=i(25);e.exports=function(e){return o[e]||(o[e]=r(e))}},function(e,t,i){var o=i(7),r=i(134),n=i(38),a=i(40)("IE_PROTO"),u=function(){},s=function(){var e,t=i(45)("iframe"),o=n.length;for(t.style.display="none",i(69).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),s=e.F;o--;)delete s.prototype[n[o]];return s()};e.exports=Object.create||function(e,t){var i;return null!==e?(u.prototype=o(e),i=new u,u.prototype=null,i[a]=e):i=s(),void 0===t?i:r(i,t)}},function(e,t,i){"use strict";var o=i(17),r=i(3),n=i(71),a=i(8),u=i(13),s=i(135),c=i(16),d=i(131),l=i(1)("iterator"),f=!([].keys&&"next"in[].keys()),h=function(){return this};e.exports=function(e,t,i,_,p,v,A){s(i,t,_);var S,E,g,I=function(e){if(!f&&e in R)return R[e];switch(e){case"keys":case"values":return function(){return new i(this,e)}}return function(){return new i(this,e)}},y=t+" Iterator",D="values"==p,m=!1,R=e.prototype,C=R[l]||R["@@iterator"]||p&&R[p],P=C||I(p),T=p?D?I("entries"):P:void 0,M="Array"==t&&R.entries||C;if(M&&(g=d(M.call(new e)))!==Object.prototype&&g.next&&(c(g,y,!0),o||"function"==typeof g[l]||a(g,l,h)),D&&C&&"values"!==C.name&&(m=!0,P=function(){return C.call(this)}),o&&!A||!f&&!m&&R[l]||a(R,l,P),u[t]=P,u[y]=h,p)if(S={values:D?P:I("values"),keys:v?P:I("keys"),entries:T},A)for(E in S)E in R||n(R,E,S[E]);else r(r.P+r.F*(f||m),t,S);return S}},function(e,t){var i=Math.ceil,o=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?o:i)(e)}},function(e,t){},function(e,t,i){var o=i(6),r=i(2).document,n=o(r)&&o(r.createElement);e.exports=function(e){return n?r.createElement(e):{}}},function(e,t,i){var o=i(6);e.exports=function(e,t){if(!o(e))return e;var i,r;if(t&&"function"==typeof(i=e.toString)&&!o(r=i.call(e)))return r;if("function"==typeof(i=e.valueOf)&&!o(r=i.call(e)))return r;if(!t&&"function"==typeof(i=e.toString)&&!o(r=i.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,i){var o=i(21);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==o(e)?e.split(""):Object(e)}},function(e,t,i){"use strict";var o=i(75),r=i(14);Object.defineProperty(t,"__esModule",{value:!0}),t.UpdateAudioPlayStatus=function(e){s.isAudioPlayWork=e},t.UpdateVideoPlayStatus=function(e){s.isVideoPlayWork=e},t.UpdateSharingPlayStatus=function(e){(s.isSharingPlayWork=e,s.localSharingDecMGR)&&s.localSharingDecMGR.Get(s.SPECIAL_ID).postMessage({command:"updateSharingStatus",status:e})},t.ClearSharingBuffer=function(){s.localSharingDecMGR&&s.localSharingDecMGR.ClearBuffer()},t.SetLocalAudioPara=function(e){s.localAudioPara=e},t.JsVideoEngine_PreInit=function(e){s.localVideoDecMGR||(s.localVideoDecMGR=new u.VideoMGR),s.localVideoEncMGR||(s.localVideoEncMGR=new u.VideoMGR),s.videoDecWorkerPath=e.videoDecWorkerPath,s.videoEncWorkerPath=e.videoEncWorkerPath,s.mediaSDKHandle=e.handle,M(0,null)},t.SetTotalEvent=function(e){e.videoDecWorkerPath&&(s.TotalWaitEvent+=6),e.audioDecWorkerPath&&(s.TotalWaitEvent+=6),e.imageDecWorkerPath&&(s.TotalWaitEvent+=3)},t.JsSharingEngine_PreInit=function(e){s.localSharingDecMGR||(s.localSharingDecMGR=new u.SharingMGR),s.sharingDecWorkerPath=e.imageDecWorkerPath,v()},t.Sharing_Decode_Post_message=_,t.JsAudioEngine_PreInit=function(e){try{s.sharedBuffer=new SharedArrayBuffer(480*s.shareBufferSampleNumb*Int32Array.BYTES_PER_ELEMENT+12*s.shareBufferSampleNumb);var t=new Int32Array(s.sharedBuffer);Lock.initialize(t,0)}catch(e){s.sharedBuffer=null}s.localAudioDecMGR||(s.localAudioDecMGR=new u.AudioMGR),s.localAudioEncMGR||(s.localAudioEncMGR=new u.AudioMGR),s.audioDecWorkerPath=e.audioDecWorkerPath,s.audioEncWorkerPath=e.audioEncWorkerPath,V(0)},t.JsSharingEngine_Init=function(e,t){s.localSharingPara||(s.localSharingPara=t),s.localSharingDecMGR||(s.localSharingDecMGR=new u.SharingMGR),function(e){s.Sharing_WebSocket_Ip_Address||(s.Sharing_WebSocket_Ip_Address=e)}(e),v()},t.JsAudioEngine_Init=function(e,t){s.localAudioPara||(s.localAudioPara=t),s.localAudioDecMGR||(s.localAudioDecMGR=new u.AudioMGR),s.localAudioEncMGR||(s.localAudioEncMGR=new u.AudioMGR),function(e){s.Audio_WebSocket_Ip_Address||(s.Audio_WebSocket_Ip_Address=e)}(e),V(0)},t.JsVideoEngine_Init=function(e,t){s.localVideoPara||(s.localVideoPara=t),s.localVideoDecMGR||(s.localVideoDecMGR=new u.VideoMGR),M(0,null),function(e){s.Video_WebSocket_Ip_Address||(s.Video_WebSocket_Ip_Address=e)}(e)},t.JsAudioEngine_UnInit=function(){(function(e){if(e=s.SPECIAL_ID,s.localAudioEncMGR){var t=s.localAudioEncMGR.map.get(e);t&&(t.postMessage({command:"closeMedia"}),s.localAudioEncMGR.map.delete(e)),s.isAudioEncodePostStart=!1}})(s.SPECIAL_ID),function(e){if(e=s.SPECIAL_ID,s.localAudioDecMGR){var t=s.localAudioDecMGR.map.get(s.SPECIAL_ID);t&&(t.postMessage({command:"closeMedia"}),s.localAudioDecMGR.map.delete(e)),s.isAudioDecodePostStart=!1}}(s.SPECIAL_ID),s.localAudioDecMGR=null,s.localAudioEncMGR=null},t.JsVideoEngine_UnInit=function(){(function(e){if(e=s.SPECIAL_ID,s.localVideoEncMGR){var t=s.localVideoEncMGR.map.get(e);t&&(t.postMessage({command:"closeMedia"}),s.localVideoEncMGR.map.delete(e)),s.isVideoEncodePostStart=!1}})(s.SPECIAL_ID),function(e){if(e=s.SPECIAL_ID,s.localVideoDecMGR){var t=s.localVideoDecMGR.map.get(e);t&&(t.postMessage({command:"closeMedia"}),s.localVideoDecMGR.map.delete(e)),s.isVideoDecodePostStart=!1}}(s.SPECIAL_ID),s.localVideoDecMGR=null,s.localVideoEncMGR=null},t.JsSharingEngine_UnInit=function(){!function(){var e=s.SPECIAL_ID;if(s.localSharingDecMGR){var t=s.localSharingDecMGR.Get(e);t&&(t.postMessage({command:"closeMedia"}),s.localSharingDecMGR=null),s.isSharingDecodeThreadStart=!1}}()},t.Uint8ToString=function(e){for(var t=[],i=0;i<e.length;i+=32768)t.push(String.fromCharCode.apply(null,e.subarray(i,i+32768)));return t.join("")},t.Audio_Encode_Frame=function(e,t,i,o){if(e=s.SPECIAL_ID,s.localAudioEncMGR){var r=s.localAudioEncMGR.map.get(e);if(r){var n={command:"EncodeAudioFrame",data:t};r.postMessage(n,[n.data.buffer])}}},t.Video_Encode_Frame=function(e,t,i,o){if(s.localVideoEncMGR){var r=s.localVideoEncMGR.map.get(e);if(r){var n={command:"encodeVideoFrame",data:t};r.postMessage(n,[n.data.buffer])}}},t.Get_Sharing_Data=function(){if(s.localSharingDecMGR)return s.localSharingDecMGR.GetData()},t.Get_Decoded_Video_Frame=E,t.Clear_Decoded_Video_Frame=function(){return s.localVideoDecMGR?s.localVideoDecMGR.VideoQueueMGR.ClearQueue():0},t.Get_SSRC_VIDEO_FPS=function(e){if(e>>=10,s.localVideoDecMGR.VideoQueueMGR&&s.localVideoDecMGR.VideoQueueMGR.ssrcInfo){var t=s.localVideoDecMGR.VideoQueueMGR.ssrcInfo.GetSSRCFpsInfo(e);if(t)return Math.round(t)}return 0},t.Get_Decoded_Video_Buffer_Length=g,t.Get_Decoded_Audio_Buffer_Length=I,t.Get_Decoded_Audio_Frame=function(e,t,i){if(s.localAudioDecMGR){e=s.SPECIAL_ID;var o=i,r=s.localAudioDecMGR.AudioQueueMGR.GetQueue(e),n=null;if(r){if(r.residue){if(r.residue.buffer.length>i)return n=r.residue.buffer.slice(0,i),r.residue.buffer=r.residue.buffer.slice(i),y(r.residue.ntptime),n;if(r.residue.buffer.length===i)return n=r.residue.buffer,y(r.residue.ntptime),r.residue=null,n;n=r.residue.buffer,y(r.residue.ntptime),r.residue=null,i-=n.length}for(var a=r.dequeue();a&&a.buffer.length<i;)y(a.ntptime),n=h(n,a.buffer),i-=a.buffer.length,a=r.dequeue();if(a&&(y(a.ntptime),0!==i&&a.buffer.length===i?n=h(n,a.buffer):0!==i&&a.buffer.length>i&&(n=h(n,a.buffer.slice(0,i)),r.residue={buffer:a.buffer.slice(i),ntptime:a.ntptime})),n){if(n.length<o)return r.residue={buffer:n,ntptime:null},null;if(n.length==o)return n}}return null}},t.Add_Video_Decode_Thread=C,t.Clear_Audio_Interval=function(){(function(){var e=s.SPECIAL_ID;if(s.localAudioEncMGR)for(var t=s.audio_pcm_queue.dequeue();t;){var i=s.localAudioEncMGR.map.get(e);s.isAudioEncodeWASMOK&&i&&i.postMessage(t,[t.data.buffer]),t=s.audio_pcm_queue.dequeue()}})(),clearInterval(s.audioPostInterval),s.audioPostInterval=null},t.Add_Audio_Decode_Thread=N,t.Get_SSRC_Latest_Time=function(e){if(e>>=10,s.localAudioDecMGR){var t=s.localAudioDecMGR.GetSSRCTimeMap(e);return null===t?0:t}},t.Meeting_Fail_Over=function(e,t){var i=s.SPECIAL_ID,o=s.localVideoDecMGR.map.get(i);o.postMessage({command:"failover",websocket_ip_address:t}),(o=s.localAudioDecMGR.map.get(i)).postMessage({command:"failover",websocket_ip_address:e})},t.Modify_Audio_SampleRate=function(e){for(var t,i=s.SPECIAL_ID,o=s.audio_pcm_queue.dequeue();o;)o=s.audio_pcm_queue.dequeue();s.localAudioEncMGR&&(t=s.localAudioEncMGR.map.get(i))&&s.isAudioEncodePostStart&&t.postMessage({command:"modifySampleRate",sampleRate:e}),s.localAudioDecMGR&&(t=s.localAudioDecMGR.map.get(i))&&s.isAudioDecodePostStart&&t.postMessage({command:"modifySampleRate",sampleRate:e})},t.Notify_Audio_Thread_Status=function(e,t){var i;(e=s.SPECIAL_ID,s.localAudioDecMGR)&&((i=s.localAudioDecMGR.map.get(e))&&i.postMessage({command:"mute",bOn:t}));s.localAudioEncMGR&&((i=s.localAudioEncMGR.map.get(e))&&i.postMessage({command:"mute",bOn:t}))},t.Notify_Audio_Thread_Msg_Channel=function(e,t){var o,i=s.SPECIAL_ID;s.localAudioDecMGR&&((o=s.localAudioDecMGR.map.get(i))&&o.postMessage({command:"decodeAudioPort"},[e.port2]));s.localAudioEncMGR&&((o=s.localAudioEncMGR.map.get(i))&&o.postMessage({command:"encodeAudioPort"},[t.port1]))},t.Notify_Video_Encode_Thread=function(e){var t=s.SPECIAL_ID;if(s.localVideoEncMGR){var i=s.localVideoEncMGR.map.get(t);i&&i.postMessage(e)}},t.Notify_Audio_Thread_CurrentSSRC=function(e){var t=s.SPECIAL_ID;if(s.localAudioDecMGR){var i=s.localAudioDecMGR.map.get(t);i&&i.postMessage({command:"updateCurrentSSRC",SSRC:e})}},t.Reset_Aec=function(){var e=s.SPECIAL_ID;if(s.localAudioEncMGR){var t=s.localAudioEncMGR.map.get(e);t&&t.postMessage({command:"resetAec"})}},t.Set_Aec_Delay=function(){var e=s.SPECIAL_ID,t=50;if(s.audioDelay&&(t=s.audioDelay),s.localAudioEncMGR){var i=s.localAudioEncMGR.map.get(e);i&&i.postMessage({command:"SetAECDelay",delay:t})}};var n=r(i(55)),a=o(i(53)),u=o(i(89)),s=o(i(51)),c=r(i(30)),d=o(i(29)),l=i(88);function f(e,t,i){!function(e,t,i){var o=new XMLHttpRequest;o.addEventListener("load",function(){var o="wasmUrl = '"+e.slice(0,e.lastIndexOf("/"))+"/';"+this.responseText,r=new Worker(window.URL.createObjectURL(new Blob([o])));t&&t.call(i,r)},o),o.open("get",e,!0),o.send()}(e,function(e){var o=s.SPECIAL_ID;t&&t.Add(o,e),e.onmessage=i},this)}function h(e,t){var i=0;if(null!==e){i=e.length;var o=new Float32Array(i+t.length);return o.set(e),o.set(t,i),o}return t}function _(){if(s.localSharingDecMGR){var e=s.localSharingDecMGR.Get(s.SPECIAL_ID);e&&s.isSharingDecodeWASMOK&&!s.isSharingDecodePostStart?(e.postMessage({command:"startMedia",websocket_ip_address:s.Sharing_WebSocket_Ip_Address,confId:s.localSharingPara.confId,confKey:"",logon:s.localSharingPara.log}),s.isSharingDecodePostStart=!0):s.isSharingDecodePostStart||setTimeout(_,100)}}function p(e){var t=e.data;s.SPECIAL_ID,t.status===a.Sharing_Data?function(e){s.localSharingDecMGR&&("sharingPara"==e.type&&s.Notify_APPUI(a.SHAING_PARA,e.data),s.isSharingPlayWork&&s.localSharingDecMGR.PutData(e))}(t.data):t.status===a.Sharing_Dec_WASM_OK?(s.isSharingDecodeWASMOK=!0,s.initialSuccessNumb+=1,s.initialSuccessNumb==s.TotalWaitEvent&&s.Notify_APPUI&&s.Notify_APPUI(a.INIT_SUCCESS,null)):t.status===a.Sharing_Dec_WASM_FAILED?(s.isInitialFailed||(s.Notify_APPUI&&s.Notify_APPUI(a.INIT_FAILED,null),s.isInitialFailed=!0),s.initialSuccessNumb=0):t.status===a.Sharing_Handle_OK?(s.initialSuccessNumb+=1,s.initialSuccessNumb==s.TotalWaitEvent&&s.Notify_APPUI&&s.Notify_APPUI(a.INIT_SUCCESS,null)):t.status===a.Sharing_Handle_FAILED?(s.isInitialFailed||(s.Notify_APPUI&&s.Notify_APPUI(a.INIT_FAILED,null),s.isInitialFailed=!0),s.initialSuccessNumb=0):t.status===a.Sharing_Dec_WebSocket_OK?(s.initialSuccessNumb+=1,s.initialSuccessNumb==s.TotalWaitEvent&&s.Notify_APPUI&&s.Notify_APPUI(a.INIT_SUCCESS,null)):t.status===a.Sharing_Dec_WebSocket_FAILED&&(s.isInitialFailed||(s.initialSuccessNumb==s.TotalWaitEvent?s.Notify_APPUI&&s.Notify_APPUI(a.VIDEO_WEBSOCKET_BROKEN,null):(s.Notify_APPUI&&s.Notify_APPUI(a.INIT_FAILED,null),s.isInitialFailed=!0)),s.initialSuccessNumb=0)}function v(){if(s.localSharingDecMGR)if(s.isSharingDecodeThreadStart)setTimeout(_,100);else{if(s.isSharingDecodeThreadStart=!0,""==s.sharingDecWorkerPath)return;f(s.sharingDecWorkerPath,s.localSharingDecMGR,p)}}function S(e,t,i){if(e=s.SPECIAL_ID,s.isAudioPlayWork&&s.localAudioDecMGR){var o=s.localAudioDecMGR.AudioQueueMGR.GetQueue(e);if(o||(o=s.localAudioDecMGR.AudioQueueMGR.AddQueue(e)),t=function(e){for(var t=new Int16Array(e.length/2),i=0;i<t.length;i++)t[i]=(255&e[2*i])+((255&e[2*i+1])<<8);return function(e,t,i){for(var o=new Float32Array(e.length-0),r=0;r<i;r++){var n=e[r]/32768;n>1&&(n=1),n<-1&&(n=-1),o[r]=n}return o}(t,0,t.length)}(t),i){var r=new n.default,a=i.length/12,u=0,c=0;for(u=0;u<a;u++){for(e=0,c=12*u+0;c<12*u+4;c++)e+=i[c]*Math.pow(256,c-12*u);e>>=10;var d=0;for(c=12*u+4;c<12*u+12;c++)d+=i[c]*Math.pow(256,c-12*u-4);r.set(e,d)}var l={buffer:t,ntptime:r}}else l={buffer:t,ntptime:null};o.enqueue(l);var f=I(e);if(s.audioBufferSize,f>50)for(var h=f-s.audioBufferSize;h>=0;)D(e),h--;else if(f>s.audioBufferSize){var _=s.localAudioDecMGR.map.get(s.SPECIAL_ID);_&&_.postMessage({command:"delay"})}}}function E(e,t){if(s.localVideoDecMGR){var i=s.localVideoDecMGR.VideoQueueMGR.GetQueue(e);return i?i.dequeue():null}}function g(e){return s.localVideoDecMGR?s.localVideoDecMGR.VideoQueueMGR.GetQueueLength(e):0}function I(e){return e=s.SPECIAL_ID,s.localAudioDecMGR?s.localAudioDecMGR.AudioQueueMGR.GetQueueLength(e):0}function y(e){s.localAudioDecMGR&&s.localAudioDecMGR.UpdateSSRCTimeMap(e)}function D(e){if(e=s.SPECIAL_ID,s.localAudioDecMGR){var t=s.localAudioDecMGR.AudioQueueMGR.GetQueue(e);return t?t.dequeue():null}}function m(){if(s.localVideoDecMGR){var e=s.localVideoDecMGR.map.get(s.SPECIAL_ID);e&&s.isVideoDecodeWASMOK&&!s.isVideoDecodePostStart?(e.postMessage({command:"startMedia",websocket_ip_address:s.Video_WebSocket_Ip_Address+"&mode=5",confId:s.localVideoPara.confId,confKey:"",logon:s.localVideoPara.log}),s.isVideoDecodePostStart=!0):s.isVideoDecodePostStart||setTimeout(m,100)}}function R(e){var t=e.data;s.SPECIAL_ID,0===t.status?function(e,t,i,o,r,n,a,u,c,d,l){if(s.isVideoPlayWork&&s.localVideoDecMGR){var f=s.localVideoDecMGR.VideoQueueMGR.GetQueue(e);f||(f=s.localVideoDecMGR.VideoQueueMGR.AddQueue(e));var h={yuvdata:t,ntptime:i,ssrc:e,width:o,height:r,r_x:n,r_y:a,r_w:u,r_h:c,rotation:d,yuv_limited:l};f.enqueue(h),s.localVideoDecMGR.VideoQueueMGR&&s.localVideoDecMGR.VideoQueueMGR.ssrcInfo&&s.localVideoDecMGR.VideoQueueMGR.ssrcInfo.UpdateSSRCInfo(h.ssrc>>10,h.ntptime);for(var _=g(e)-30;_>=0;)E(e),_--}}(t.video_ssrc,t.data,t.video_timestamp,t.video_width,t.video_height,t.rendering_x,t.rendering_y,t.rendering_w,t.rendering_h,t.rotation,t.yuv_limited):t.status===a.Video_Dec_WASM_OK?(s.isVideoDecodeWASMOK=!0,s.initialSuccessNumb+=1,s.initialSuccessNumb==s.TotalWaitEvent&&s.Notify_APPUI&&s.Notify_APPUI(a.INIT_SUCCESS,null)):t.status===a.DECODE_MESSAGE?s.Notify_APPUI(a.VIDEO_DECODE_MAX_SIZE,{ssrc:t.ssrc,size:t.size}):t.status===a.Video_Dec_WASM_FAILED?(s.isInitialFailed||(s.Notify_APPUI&&s.Notify_APPUI(a.INIT_FAILED,null),s.isInitialFailed=!0),s.initialSuccessNumb=0):t.status===a.Video_Dec_Handle_OK?(s.initialSuccessNumb+=1,s.initialSuccessNumb==s.TotalWaitEvent&&s.Notify_APPUI&&s.Notify_APPUI(a.INIT_SUCCESS,null)):t.status===a.Video_Dec_Handle_FAILED?(s.isInitialFailed||(s.Notify_APPUI&&s.Notify_APPUI(a.INIT_FAILED,null),s.isInitialFailed=!0),s.initialSuccessNumb=0):t.status===a.Video_Dec_WebSocket_OK?l.SOCKET_STATE.video.decode||(l.SOCKET_STATE.video.decode=!0,s.initialSuccessNumb+=1,s.initialSuccessNumb==s.TotalWaitEvent&&s.Notify_APPUI&&s.Notify_APPUI(a.INIT_SUCCESS,null)):t.status===a.Video_Dec_WebSocket_FAILED&&(s.isInitialFailed||(s.initialSuccessNumb==s.TotalWaitEvent?s.Notify_APPUI&&s.Notify_APPUI(a.VIDEO_WEBSOCKET_BROKEN,null):(s.Notify_APPUI&&s.Notify_APPUI(a.INIT_FAILED,null),s.isInitialFailed=!0)),s.initialSuccessNumb=0)}function C(e,t){if(s.SPECIAL_ID,s.localVideoDecMGR)if(s.isVideoDecodeThreadStart)setTimeout(m,100);else{if(s.isVideoDecodeThreadStart=!0,""==s.videoDecWorkerPath)return;f(s.videoDecWorkerPath,s.localVideoDecMGR,R)}}function P(e){var t=e.data;s.SPECIAL_ID,0===t.status||(t.status===a.Video_Enc_WASM_OK||t.status===a.Video_Dec_WASM_OK?(C(),s.isVideoEncodeWASMOK=!0,s.initialSuccessNumb+=1,s.initialSuccessNumb==s.TotalWaitEvent&&s.Notify_APPUI&&s.Notify_APPUI(a.INIT_SUCCESS,null)):t.status===a.Video_Enc_WASM_FAILED?(s.isInitialFailed||(s.Notify_APPUI&&s.Notify_APPUI(a.INIT_FAILED,null),s.isInitialFailed=!0),s.initialSuccessNumb=0):t.status===a.Video_Enc_Handle_OK||a.Video_Dec_Handle_OK===t.status?(s.initialSuccessNumb+=1,s.initialSuccessNumb==s.TotalWaitEvent&&s.Notify_APPUI&&s.Notify_APPUI(a.INIT_SUCCESS,null)):t.status===a.Video_Enc_Handle_FAILED?(s.isInitialFailed||(s.Notify_APPUI&&s.Notify_APPUI(a.INIT_FAILED,null),s.isInitialFailed=!0),s.initialSuccessNumb=0):t.status===a.Video_Enc_WebSocket_OK||a.Video_Dec_WebSocket_OK===t.status?l.SOCKET_STATE.video.encode||(l.SOCKET_STATE.video.encode=!0,s.initialSuccessNumb+=1,s.initialSuccessNumb==s.TotalWaitEvent&&s.Notify_APPUI&&s.Notify_APPUI(a.INIT_SUCCESS,null)):t.status===a.Video_Enc_WebSocket_FAILED?(s.isInitialFailed||(s.initialSuccessNumb==s.TotalWaitEvent?s.Notify_APPUI&&s.Notify_APPUI(a.VIDEO_WEBSOCKET_BROKEN,null):(s.Notify_APPUI&&s.Notify_APPUI(a.INIT_FAILED,null),s.isInitialFailed=!0)),s.initialSuccessNumb=0):t.status===a.Video_Capture_Tick&&s.mediaSDKHandle.Process_Video())}function T(){if(s.localVideoEncMGR){var e=s.localVideoEncMGR.map.get(s.SPECIAL_ID);e&&s.isVideoEncodeWASMOK&&!s.isVideoEncodePostStart?(e.postMessage({command:"startMedia",websocket_ip_address:s.Video_WebSocket_Ip_Address+"&mode=2",confId:s.localVideoPara.confId,confKey:"",logon:s.localVideoPara.log,sendvideo:!0,isChromeOrEdge:c.default.browser.isChrome||c.default.browser.isEdge}),s.isVideoEncodePostStart=!0):s.isVideoEncodePostStart||setTimeout(T,100)}}function M(e,t){if(s.SPECIAL_ID,s.localVideoEncMGR)if(s.isVideoEncodeThreadStart)C(),setTimeout(T,100);else{if(s.isVideoEncodeThreadStart=!0,""==s.videoEncWorkerPath)return;f(s.videoEncWorkerPath,s.localVideoEncMGR,P)}}function O(){if(s.localAudioDecMGR){var e=s.localAudioDecMGR.map.get(s.SPECIAL_ID);if(s.localAudioPara&&e&&s.isAudioDecodeWASMOK&&!s.isAudioDecodePostStart){if(e.postMessage({command:"startMedia",websocket_ip_address:s.Audio_WebSocket_Ip_Address+"&mode=5",sampleRate:s.localAudioPara.sampleRate,userid:s.localAudioPara.userid,logon:s.localAudioPara.log,isEdge:c.default.browser.isEdge,decode:1}),s.sharedBuffer)try{e.postMessage({command:"sharedBuffer",data:s.sharedBuffer})}catch(t){e.postMessage({command:"sharedBuffer",data:s.sharedBuffer},[s.sharedBuffer])}s.isAudioDecodePostStart=!0}else s.isAudioDecodePostStart||setTimeout(O,100)}}function b(e){var t=e.data,i=s.SPECIAL_ID;if(0===t.status){if(t.time?d.AudioNode?d.AudioNode.postData("data",{ssrc:d.CurrentSSRC,data:t.data,time:t.time}):S(i,t.data,t.time):d.AudioNode?d.AudioNode.postData("data",{ssrc:d.CurrentSSRC,data:t.data,time:null}):S(i,t.data,null),s.localAudioEncMGR&&!s.sharedBuffer){var o=s.localAudioEncMGR.map.get(i);if(o&&t.aec.length){var r={command:"EchoCancel",data:t.aec,channels:t.channels,sampleHz:t.sampleHz};o.postMessage(r,[r.data.buffer])}}}else t.status===a.Audio_Enc_WASM_OK||t.status===a.Audio_Dec_WASM_OK?(s.isAudioDecodeWASMOK=!0,s.initialSuccessNumb+=1,s.initialSuccessNumb==s.TotalWaitEvent&&s.Notify_APPUI&&s.Notify_APPUI(a.INIT_SUCCESS,null)):t.status===a.Audio_Dec_WASM_FAILED?(s.isInitialFailed||s.Notify_APPUI&&(s.Notify_APPUI(a.INIT_FAILED,null),s.isInitialFailed=!0),s.initialSuccessNumb=0):t.status===a.Audio_Dec_Handle_OK?(s.initialSuccessNumb+=1,s.initialSuccessNumb==s.TotalWaitEvent&&s.Notify_APPUI&&s.Notify_APPUI(a.INIT_SUCCESS,null)):t.status===a.Audio_Dec_Handle_FAILED?(s.isInitialFailed||s.Notify_APPUI&&(s.Notify_APPUI(a.INIT_FAILED,null),s.isInitialFailed=!0),s.initialSuccessNumb=0):t.status===a.Audio_Dec_WebSocket_OK?l.SOCKET_STATE.audio.encode||(l.SOCKET_STATE.audio.encode=!0,s.initialSuccessNumb+=1,s.initialSuccessNumb==s.TotalWaitEvent&&s.Notify_APPUI&&s.Notify_APPUI(a.INIT_SUCCESS,null)):t.status===a.Audio_Dec_WebSocket_FAILED?(s.isInitialFailed||(s.initialSuccessNumb==s.TotalWaitEvent?s.Notify_APPUI&&s.Notify_APPUI(a.AUDIO_WEBSOCKET_BROKEN,null):(s.Notify_APPUI&&s.Notify_APPUI(a.INIT_FAILED,null),s.isInitialFailed=!0)),s.initialSuccessNumb=0):6===t.status?(s.initialSuccessNumb+=1,s.initialSuccessNumb==s.TotalWaitEvent&&s.Notify_APPUI&&s.Notify_APPUI(a.INIT_SUCCESS,null)):-6===t.status&&(s.isInitialFailed||s.Notify_APPUI&&(s.Notify_APPUI(a.INIT_FAILED,null),s.isInitialFailed=!0),s.initialSuccessNumb=0)}function N(e,t){s.SPECIAL_ID,s.localAudioDecMGR&&(s.isAudioDecodeThreadStart?setTimeout(O,100):(s.isAudioDecodeThreadStart=!0,""!=s.audioDecWorkerPath&&f(s.audioDecWorkerPath,s.localAudioDecMGR,b)))}function x(){var e=s.localAudioEncMGR.map.get(s.SPECIAL_ID);if(s.localAudioPara&&e&&s.isAudioEncodeWASMOK&&!s.isAudioEncodePostStart){if(e.postMessage({command:"startMedia",websocket_ip_address:s.Audio_WebSocket_Ip_Address+"&mode=2",sampleRate:s.localAudioPara.sampleRate,userid:s.localAudioPara.userid,encode:1}),s.sharedBuffer)try{e.postMessage({command:"sharedBuffer",data:s.sharedBuffer})}catch(t){e.postMessage({command:"sharedBuffer",data:s.sharedBuffer},[s.sharedBuffer])}s.isAudioEncodePostStart=!0}else setTimeout(x,100)}function U(e){if(s.localAudioDecMGR){var t=s.SPECIAL_ID,i=e.data,o=s.localAudioDecMGR.map.get(t);0==i.status?o&&o.postMessage({command:"EncodedAudioFrame",data:i.data},[i.data.buffer]):i.status===a.Audio_Enc_WASM_OK||i.status===a.Audio_Dec_WASM_OK?(N(),s.isAudioEncodeWASMOK=!0,s.initialSuccessNumb+=1,s.initialSuccessNumb==s.TotalWaitEvent&&s.Notify_APPUI&&s.Notify_APPUI(a.INIT_SUCCESS,null)):i.status===a.Audio_Enc_WASM_FAILED||i.status===a.Audio_Dec_WASM_FAILED?(s.isInitialFailed||s.Notify_APPUI&&(s.Notify_APPUI(a.INIT_FAILED,null),s.isInitialFailed=!0),s.initialSuccessNumb=0):i.status===a.Audio_Dec_Handle_OK?(s.initialSuccessNumb+=1,s.initialSuccessNumb==s.TotalWaitEvent&&s.Notify_APPUI&&s.Notify_APPUI(a.INIT_SUCCESS,null)):i.status===a.Audio_Dec_WebSocket_OK?l.SOCKET_STATE.audio.decode||(l.SOCKET_STATE.audio.decode=!0,s.initialSuccessNumb+=1,s.initialSuccessNumb==s.TotalWaitEvent&&s.Notify_APPUI&&s.Notify_APPUI(a.INIT_SUCCESS,null)):i.status===a.Audio_Dec_WebSocket_FAILED?(s.isInitialFailed||(s.initialSuccessNumb==s.TotalWaitEvent?s.Notify_APPUI&&s.Notify_APPUI(a.AUDIO_WEBSOCKET_BROKEN,null):(s.Notify_APPUI&&s.Notify_APPUI(a.INIT_FAILED,null),s.isInitialFailed=!0)),s.initialSuccessNumb=0):i.status===a.Audio_Enc_Handle_FAILED||i.status===a.Audio_Dec_Handle_FAILED?(s.isInitialFailed||s.Notify_APPUI&&(s.Notify_APPUI(a.INIT_FAILED,null),s.isInitialFailed=!0),s.initialSuccessNumb=0):i.status===a.Audio_Mute?s.Notify_APPUI&&s.Notify_APPUI(a.AUDIO_ZERO_DATA,null):i.status===a.AUDIO_DELAY&&(s.indexDbObject.put(i.delay,"delay"),s.openIndexFlag&&s.indexDbObject.select("delay"))}}function V(e){s.SPECIAL_ID,s.isAudioEncodeThreadStart?(N(),setTimeout(x,100)):(s.isAudioEncodeThreadStart=!0,""!=s.audioEncWorkerPath&&f(s.audioEncWorkerPath,s.localAudioEncMGR,U))}(0,r(i(50)).default)("engine").log,function(){var e={init:function(t){if(this.db_name=t.db_name,this.db_version=t.db_version,this.db_store_name=t.db_store_name,indexedDB){try{var i=indexedDB.open(this.db_name,this.db_version)}catch(e){return void(s.indexDbObject=null)}i.onerror=function(e){s.indexDbObject=null},i.onupgradeneeded=function(t){this.db=t.target.result,this.db.createObjectStore(e.db_store_name)},i.onsuccess=function(t){e.db=t.target.result,s.openIndexFlag=!0,s.indexDbObject.select("delay")}}else s.indexDbObject=null},put:function(t,i){try{var o=e.db.transaction(e.db_store_name,"readwrite").objectStore(e.db_store_name).put(t,i);o.onsuccess=function(){},o.onerror=function(e){}}catch(e){}},delete:function(t){request=e.db.transaction(e.db_store_name,"readwrite").objectStore(e.db_store_name).delete(t),request.onsuccess=function(){}},select:function(t){try{var i=e.db.transaction(e.db_store_name,"readwrite").objectStore(e.db_store_name);if(t)var o=i.get(t);else o=i.getAll();o.onsuccess=function(){s.audioDelay=o.result},o.onerror=function(){s.audioDelay=0}}catch(e){}},clear:function(){e.db.transaction(e.db_store_name,"readwrite").objectStore(e.db_store_name).clear().onsuccess=function(){}},close:function(){e.db&&e.db.close()}};s.indexDbObject=e,s.indexDbObject.init({db_name:"AEC",db_version:1,db_store_name:"delay"})}()},function(e,t,i){"use strict";var o=i(14);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(i(87)),n={},a=[],u=1e3,s=1,c=localStorage.__islogdebug,d=localStorage.__islogdebug;t.default=function(e){function t(){var t=[],i="log-".concat(e,"-").concat(s);return t.push.apply(t,arguments),t.push({fn:function(e){return function(){return n[e]}}(i)}),function(e,t){if(c&&(a.push(e),n[e]=t,a.length>u)){var i=a.shift();delete n[i]}}(i,(new Error).stack),s++,t}var i=function(){var i;d&&(i=console).log.apply(i,[e].concat((0,r.default)(t(arguments))))};return["log","info","warn","error"].forEach(function(o){i[o]=function(){var i;d&&(i=console)[o].apply(i,[e].concat((0,r.default)(t(arguments))))}}),i}},function(e,t,i){"use strict";var o=i(14);Object.defineProperty(t,"__esModule",{value:!0}),t.audioBufferSize=t.openIndexFlag=t.audioDelay=t.indexDbObject=t.sharedBuffer=t.audioPostInterval=t.TotalWaitEvent=t.initialSuccessNumb=t.shareBufferSampleNumb=t.isSharingPlayWork=t.isVideoPlayWork=t.isAudioPlayWork=t.isVideoEncodeThreadStart=t.isSharingDecodeThreadStart=t.isVideoDecodeThreadStart=t.isAudioDecodeThreadStart=t.isAudioEncodeThreadStart=t.isSharingDecodePostStart=t.isVideoEncodePostStart=t.isVideoDecodePostStart=t.isAudioDecodePostStart=t.isAudioEncodePostStart=t.sharingDecWorkerPath=t.videoEncWorkerPath=t.videoDecWorkerPath=t.audioDecWorkerPath=t.audioEncWorkerPath=t.isSharingDecodeWASMOK=t.isVideoDecodeWASMOK=t.isVideoEncodeWASMOK=t.isAudioDecodeWASMOK=t.isAudioEncodeWASMOK=t.isInitialFailed=t.int16Array=t.audio_pcm_queue=t.mediaSDKHandle=t.Sharing_WebSocket_Ip_Address=t.Video_WebSocket_Ip_Address=t.Audio_WebSocket_Ip_Address=t.localSharingPara=t.localVideoPara=t.localAudioPara=t.localSharingDecMGR=t.localVideoEncMGR=t.localAudioEncMGR=t.localVideoDecMGR=t.localAudioDecMGR=t.Notify_APPUI=t.SPECIAL_ID=void 0;var r=o(i(52)),n=o(i(30));t.SPECIAL_ID=0,t.Notify_APPUI=null,t.localAudioDecMGR=null,t.localVideoDecMGR=null,t.localAudioEncMGR=null,t.localVideoEncMGR=null,t.localSharingDecMGR=null,t.localAudioPara=null,t.localVideoPara=null,t.localSharingPara=null,t.Audio_WebSocket_Ip_Address=null,t.Video_WebSocket_Ip_Address=null,t.Sharing_WebSocket_Ip_Address=null,t.mediaSDKHandle=null;var a=new r.default;t.audio_pcm_queue=a,t.int16Array=null,t.isInitialFailed=!1,t.isAudioEncodeWASMOK=!1,t.isAudioDecodeWASMOK=!1,t.isVideoEncodeWASMOK=!1,t.isVideoDecodeWASMOK=!1,t.isSharingDecodeWASMOK=!1,t.audioEncWorkerPath="",t.audioDecWorkerPath="",t.videoDecWorkerPath="",t.videoEncWorkerPath="",t.sharingDecWorkerPath="",t.isAudioEncodePostStart=!1,t.isAudioDecodePostStart=!1,t.isVideoDecodePostStart=!1,t.isVideoEncodePostStart=!1,t.isSharingDecodePostStart=!1,t.isAudioEncodeThreadStart=!1,t.isAudioDecodeThreadStart=!1,t.isVideoDecodeThreadStart=!1,t.isSharingDecodeThreadStart=!1,t.isVideoEncodeThreadStart=!1,t.isAudioPlayWork=!1,t.isVideoPlayWork=!1,t.isSharingPlayWork=!1,t.shareBufferSampleNumb=30,t.initialSuccessNumb=0,t.TotalWaitEvent=0,t.audioPostInterval=null,t.sharedBuffer=null,t.indexDbObject=null,t.audioDelay=0,t.openIndexFlag=!1;var u=n.default.browser.isEdge||n.default.browser.isFirefox?30:15;t.audioBufferSize=u},function(e,t,i){"use strict";function o(){this.a=[],this.b=0,this.residue=null}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o.prototype.getLength=function(){return this.a.length-this.b},o.prototype.isEmpty=function(){return 0==this.a.length},o.prototype.enqueue=function(e){this.a.push(e)},o.prototype.dequeue=function(){if(0!=this.a.length){var e=this.a[this.b];return 2*++this.b>=this.a.length&&(this.a=this.a.slice(this.b),this.b=0),e}return null},o.prototype.peek=function(){return 0<this.a.length?this.a[this.b]:void 0};var r=o;t.default=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AUDIO_ILLEGAL=t.AUDIO_REMOVE=t.AUDIO_START=t.AUDIO_STOP=t.STOP_VIDEO_CAPTURE_FAILED=t.USER_CAMERA_IS_TAKEN_BY_OTHER_PROGRAMS=t.USER_FORBIDDED_CAPTURE_VIDEO=t.AUDIO_CTX_SAMPLERATE=t.AUDIO_ZERO_DATA=t.SHARING_DEC_THREAD_FAILED=t.VIDEO_WEBSOCKET_BROKEN=t.AUDIO_WEBSOCKET_BROKEN=t.USER_FORBIDDED_CAPTURE_AUDIO=t.INIT_FAILED=t.STOP_VIDEO_CAPTURE_SUCCESS=t.START_VIDEO_CAPTURE_SUCCESS=t.CURRENT_CAPTURE_VIDEO_WIDTH_HEIGHT=t.VIDEO_DECODE_MAX_SIZE=t.SHAING_PARA=t.SHARING_DATA=t.SHARING_DEC_THREAD_OK=t.CURRENT_VIDEO_RESOLUTION=t.USER_GRANT_CAPTURE_AUDIO=t.INIT_SUCCESS=t.Video_Enc_WebSocket_FAILED=t.Sharing_Dec_WebSocket_FAILED=t.Sharing_Handle_FAILED=t.Audio_Mute=t.Sharing_Dec_WASM_FAILED=t.Video_Enc_Handle_FAILED=t.Video_Enc_WASM_FAILED=t.Video_Dec_WebSocket_FAILED=t.Video_Dec_Handle_FAILED=t.Video_Dec_WASM_FAILED=t.Audio_Enc_Handle_FAILED=t.Audio_Enc_WASM_FAILED=t.Audio_Dec_WebSocket_FAILED=t.Audio_Dec_Handle_FAILED=t.Audio_Dec_WASM_FAILED=t.Video_Capture_Tick=t.Video_Enc_WebSocket_OK=t.DECODE_MESSAGE=t.Sharing_Data=t.Sharing_Handle_OK=t.Sharing_Dec_WebSocket_OK=t.AUDIO_DELAY=t.Sharing_Dec_PICTURE=t.Sharing_Dec_WASM_OK=t.Video_Enc_Handle_OK=t.Video_Enc_WASM_OK=t.Video_Dec_WebSocket_OK=t.Video_Dec_Handle_OK=t.Video_Dec_WASM_OK=t.Audio_Enc_Handle_OK=t.Audio_Enc_WASM_OK=t.Audio_Dec_WebSocket_OK=t.Audio_Dec_Handle_OK=t.Audio_Dec_WASM_OK=t.START_REMOTE_CONTROL=t.SWITCH_CANVAS_FOR_VIDEO_CAPTURE=t.STOP_SHARING=t.START_SHARING=t.JOIN_COMPUTER_AUDIO=t.LEAVE_COMPUTER_AUDIO=t.REMOVE_RENDER_AUDIO=t.WEBRTC_RESTART=t.CHANGE_AUDIO_MIC=t.END_MEDIA=t.MEETING_FAIL_OVER=t.LEAVE_MEETING=t.REMOVE_AUDIO_CAPTURE=t.CHANGE_CURRENT_ACTIVE_SSRC=t.CHANGE_VIDEO_CAPTURE_DEVICE=t.CHANGE_AUDIO_SPEAKER=t.CHANGE_VIDEO_RESOLUTION=t.CHANGE_FRAME_RATE=t.MUTE_AUDIO=t.UNMUTE_AUDIO=t.STOP_RENDER_AUDIO=t.ADD_RENDER_AUDIO=t.STOP_CAPTURE_VIDEO=t.START_CAPTURE_VIDEO=t.STOP_RENDER_VIDEO=t.ADD_RENDER_VIDEO=t.START_MEDIA=void 0,t.START_MEDIA=0,t.ADD_RENDER_VIDEO=1,t.STOP_RENDER_VIDEO=2,t.START_CAPTURE_VIDEO=3,t.STOP_CAPTURE_VIDEO=4,t.ADD_RENDER_AUDIO=5,t.STOP_RENDER_AUDIO=6,t.UNMUTE_AUDIO=7,t.MUTE_AUDIO=8,t.CHANGE_FRAME_RATE=9,t.CHANGE_VIDEO_RESOLUTION=10,t.CHANGE_AUDIO_SPEAKER=11,t.CHANGE_VIDEO_CAPTURE_DEVICE=12,t.CHANGE_CURRENT_ACTIVE_SSRC=13,t.REMOVE_AUDIO_CAPTURE=14,t.LEAVE_MEETING=15,t.MEETING_FAIL_OVER=16,t.END_MEDIA=17,t.CHANGE_AUDIO_MIC=18,t.WEBRTC_RESTART=19,t.REMOVE_RENDER_AUDIO=20,t.LEAVE_COMPUTER_AUDIO=21,t.JOIN_COMPUTER_AUDIO=22,t.START_SHARING=23,t.STOP_SHARING=24,t.SWITCH_CANVAS_FOR_VIDEO_CAPTURE=25,t.START_REMOTE_CONTROL=26,t.Audio_Dec_WASM_OK=1,t.Audio_Dec_Handle_OK=2,t.Audio_Dec_WebSocket_OK=3,t.Audio_Enc_WASM_OK=4,t.Audio_Enc_Handle_OK=5,t.Video_Dec_WASM_OK=7,t.Video_Dec_Handle_OK=8,t.Video_Dec_WebSocket_OK=9,t.Video_Enc_WASM_OK=10,t.Video_Enc_Handle_OK=11,t.Sharing_Dec_WASM_OK=12,t.Sharing_Dec_PICTURE=13,t.AUDIO_DELAY=14,t.Sharing_Dec_WebSocket_OK=15,t.Sharing_Handle_OK=16,t.Sharing_Data=17,t.DECODE_MESSAGE=18,t.Video_Enc_WebSocket_OK=19,t.Video_Capture_Tick=20,t.Audio_Dec_WASM_FAILED=-1,t.Audio_Dec_Handle_FAILED=-2,t.Audio_Dec_WebSocket_FAILED=-3,t.Audio_Enc_WASM_FAILED=-4,t.Audio_Enc_Handle_FAILED=-5,t.Video_Dec_WASM_FAILED=-7,t.Video_Dec_Handle_FAILED=-8,t.Video_Dec_WebSocket_FAILED=-9,t.Video_Enc_WASM_FAILED=-10,t.Video_Enc_Handle_FAILED=-11,t.Sharing_Dec_WASM_FAILED=-12,t.Audio_Mute=-13,t.Sharing_Handle_FAILED=-14,t.Sharing_Dec_WebSocket_FAILED=-15,t.Video_Enc_WebSocket_FAILED=-16,t.INIT_SUCCESS=1,t.USER_GRANT_CAPTURE_AUDIO=2,t.CURRENT_VIDEO_RESOLUTION=3,t.SHARING_DEC_THREAD_OK=4,t.SHARING_DATA=5,t.SHAING_PARA=6,t.VIDEO_DECODE_MAX_SIZE=7,t.CURRENT_CAPTURE_VIDEO_WIDTH_HEIGHT=8,t.START_VIDEO_CAPTURE_SUCCESS=9,t.STOP_VIDEO_CAPTURE_SUCCESS=10,t.INIT_FAILED=-1,t.USER_FORBIDDED_CAPTURE_AUDIO=-2,t.AUDIO_WEBSOCKET_BROKEN=-3,t.VIDEO_WEBSOCKET_BROKEN=-4,t.SHARING_DEC_THREAD_FAILED=-5,t.AUDIO_ZERO_DATA=-6,t.AUDIO_CTX_SAMPLERATE=-7,t.USER_FORBIDDED_CAPTURE_VIDEO=-8,t.USER_CAMERA_IS_TAKEN_BY_OTHER_PROGRAMS=-9,t.STOP_VIDEO_CAPTURE_FAILED=-10,t.AUDIO_STOP=0,t.AUDIO_START=1,t.AUDIO_REMOVE=2,t.AUDIO_ILLEGAL=-1},function(e,t,i){var o=i(6);e.exports=function(e,t){if(!o(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,i){e.exports=i(103)},function(e,t,i){var o=i(70),r=i(38).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return o(e,r)}},function(e,t,i){var o=i(21);e.exports=Array.isArray||function(e){return"Array"==o(e)}},function(e,t,i){var o=i(114),r=i(112);function n(e){return(n="function"==typeof r&&"symbol"==typeof o?function(e){return typeof e}:function(e){return e&&"function"==typeof r&&e.constructor===r&&e!==r.prototype?"symbol":typeof e})(e)}function a(t){return"function"==typeof r&&"symbol"===n(o)?e.exports=a=function(e){return n(e)}:e.exports=a=function(e){return e&&"function"==typeof r&&e.constructor===r&&e!==r.prototype?"symbol":n(e)},a(t)}e.exports=a},function(e,t,i){var o=i(1)("iterator"),r=!1;try{var n=[7][o]();n.return=function(){r=!0},Array.from(n,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!r)return!1;var i=!1;try{var n=[7],a=n[o]();a.next=function(){return{done:i=!0}},n[o]=function(){return a},e(n)}catch(e){}return i}},function(e,t,i){"use strict";var o=i(2),r=i(0),n=i(4),a=i(5),u=i(1)("species");e.exports=function(e){var t="function"==typeof r[e]?r[e]:o[e];a&&t&&!t[u]&&n.f(t,u,{configurable:!0,get:function(){return this}})}},function(e,t,i){var o=i(7),r=i(6),n=i(36);e.exports=function(e,t){if(o(e),r(t)&&t.constructor===e)return t;var i=n.f(e);return(0,i.resolve)(t),i.promise}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,i){var o,r,n,a=i(9),u=i(127),s=i(69),c=i(45),d=i(2),l=d.process,f=d.setImmediate,h=d.clearImmediate,_=d.MessageChannel,p=d.Dispatch,v=0,A={},S=function(){var e=+this;if(A.hasOwnProperty(e)){var t=A[e];delete A[e],t()}},E=function(e){S.call(e.data)};f&&h||(f=function(e){for(var t=[],i=1;arguments.length>i;)t.push(arguments[i++]);return A[++v]=function(){u("function"==typeof e?e:Function(e),t)},o(v),v},h=function(e){delete A[e]},"process"==i(21)(l)?o=function(e){l.nextTick(a(S,e,1))}:p&&p.now?o=function(e){p.now(a(S,e,1))}:_?(n=(r=new _).port2,r.port1.onmessage=E,o=a(n.postMessage,n,1)):d.addEventListener&&"function"==typeof postMessage&&!d.importScripts?(o=function(e){d.postMessage(e+"","*")},d.addEventListener("message",E,!1)):o="onreadystatechange"in c("script")?function(e){s.appendChild(c("script")).onreadystatechange=function(){s.removeChild(this),S.call(e)}}:function(e){setTimeout(a(S,e,1),0)}),e.exports={set:f,clear:h}},function(e,t,i){var o=i(7),r=i(19),n=i(1)("species");e.exports=function(e,t){var i,a=o(e).constructor;return void 0===a||null==(i=o(a)[n])?t:r(i)}},function(e,t,i){var o=i(22),r=i(1)("iterator"),n=i(13);e.exports=i(0).getIteratorMethod=function(e){if(null!=e)return e[r]||e["@@iterator"]||n[o(e)]}},function(e,t,i){var o=i(13),r=i(1)("iterator"),n=Array.prototype;e.exports=function(e){return void 0!==e&&(o.Array===e||n[r]===e)}},function(e,t,i){var o=i(7);e.exports=function(e,t,i,r){try{return r?t(o(i)[0],i[1]):t(i)}catch(t){var n=e.return;throw void 0!==n&&o(n.call(e)),t}}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,i){var o=i(2).document;e.exports=o&&o.documentElement},function(e,t,i){var o=i(11),r=i(12),n=i(133)(!1),a=i(40)("IE_PROTO");e.exports=function(e,t){var i,u=r(e),s=0,c=[];for(i in u)i!=a&&o(u,i)&&c.push(i);for(;t.length>s;)o(u,i=t[s++])&&(~n(c,i)||c.push(i));return c}},function(e,t,i){e.exports=i(8)},function(e,t,i){e.exports=i(137)},function(e,t,i){e.exports=!i(5)&&!i(10)(function(){return 7!=Object.defineProperty(i(45)("div"),"a",{get:function(){return 7}}).a})},function(e,t,i){var o=i(28),r=i(20),n=i(12),a=i(46),u=i(11),s=i(73),c=Object.getOwnPropertyDescriptor;t.f=i(5)?c:function(e,t){if(e=n(e),t=a(t,!0),s)try{return c(e,t)}catch(e){}if(u(e,t))return r(!o.f.call(e,t),e[t])}},function(e,t,i){var o=i(144),r=i(140);e.exports=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var n=r&&o?o(e,i):{};n.get||n.set?r(t,i,n):t[i]=e[i]}return t.default=e,t}},function(e,t,i){"use strict";function o(e){this.name="CameraOccupiedError",this.message=e,this.stack=(new Error).stack}Object.defineProperty(t,"__esModule",{value:!0}),t.CameraOccupiedError=o,o.prototype=new Error},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(e,t,i){var o=i(22),r=i(1)("iterator"),n=i(13);e.exports=i(0).isIterable=function(e){var t=Object(e);return void 0!==t[r]||"@@iterator"in t||n.hasOwnProperty(o(t))}},function(e,t,i){i(23),i(18),e.exports=i(78)},function(e,t,i){e.exports=i(79)},function(e,t,i){"use strict";var o=i(4),r=i(20);e.exports=function(e,t,i){t in e?o.f(e,t,r(0,i)):e[t]=i}},function(e,t,i){"use strict";var o=i(9),r=i(3),n=i(24),a=i(67),u=i(66),s=i(26),c=i(81),d=i(65);r(r.S+r.F*!i(59)(function(e){Array.from(e)}),"Array",{from:function(e){var t,i,r,l,f=n(e),h="function"==typeof this?this:Array,_=arguments.length,p=_>1?arguments[1]:void 0,v=void 0!==p,A=0,S=d(f);if(v&&(p=o(p,_>2?arguments[2]:void 0,2)),null==S||h==Array&&u(S))for(i=new h(t=s(f.length));t>A;A++)c(i,A,v?p(f[A],A):f[A]);else for(l=S.call(f),i=new h;!(r=l.next()).done;A++)c(i,A,v?a(l,p,[r.value,A],!0):r.value);return i.length=A,i}})},function(e,t,i){i(18),i(82),e.exports=i(0).Array.from},function(e,t,i){e.exports=i(83)},function(e,t,i){var o=i(84),r=i(80);e.exports=function(e){if(r(Object(e))||"[object Arguments]"===Object.prototype.toString.call(e))return o(e)}},function(e,t){e.exports=function(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}},function(e,t,i){var o=i(86),r=i(85),n=i(77);e.exports=function(e){return o(e)||r(e)||n()}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SOCKET_STATE=void 0,t.SOCKET_STATE={audio:{decode:!1,encode:!1},video:{decode:!1,encode:!1}}},function(e,t,i){"use strict";var o=i(14);Object.defineProperty(t,"__esModule",{value:!0}),t.AudioQueueMGR=s,t.VideoQueueMGR=l,t.VideoMGR=h,t.SharingMGR=_,t.AudioMGR=t.VideoInfoMGR=t.VideoInfo=t.VideoData=t.AudioData=void 0;var r=o(i(55)),n=o(i(52)),a=function(e,t){this.timeStamp=t,this.buf=e};t.AudioData=a;var u=function(e,t){this.timeStamp=t,this.buf=e};function s(){this.ssrcQueueMap=new r.default,s.prototype.AddQueue=function(e){var t=new n.default;return this.ssrcQueueMap.set(e,t),t},s.prototype.DeleteQueue=function(e){this.ssrcQueueMap.delete(e)},s.prototype.GetQueue=function(e){return this.ssrcQueueMap.get(e)},s.prototype.GetQueueData=function(e){return this.ssrcQueueMap.get(e).dequeue()},s.prototype.PutQueueData=function(e,t){this.ssrcQueueMap.get(e).enqueue(t)},s.prototype.GetQueueLength=function(e){var t=this.ssrcQueueMap.get(e);return null!==t?t.getLength():0}}t.VideoData=u;var c=function(){this.frames=0,this.ntp=new n.default};t.VideoInfo=c,c.prototype={UpdateVideoInfo:function(e){frames++,this.ntp.getLength()>30&&this.ntp.dequeue(),this.ntp.enqueue(e)},GetVideoFpsInfo:function(){var e=this.ntp.getLength();if(!(e<5)){for(var t=0,i=0,o=0,r=0,n=0;n<e;n++){var a=this.ntp.dequeue();0==a&&0==o?i++:0!=a?(r=0,0==o&&(o=a),t=a):0!=o&&t!=o&&0==a&&r++}return 0==t||t==o?0:e-i-r-1!=0?(t-o)/(e-i-r-1):0}}};var d=function(){this.ssrcInfoMap=new r.default};function l(){this.ssrcQueueMap=new r.default,this.ssrcInfo=new d,l.prototype.AddQueue=function(e){var t=new n.default;return this.ssrcQueueMap.set(e,t),t},l.prototype.DeleteQueue=function(e){this.ssrcQueueMap.delete(e)},l.prototype.GetQueue=function(e){return this.ssrcQueueMap.get(e)},l.prototype.ClearQueue=function(){this.ssrcQueueMap.clear()},l.prototype.GetQueueData=function(e){return this.ssrcQueueMap.get(e).dequeue()},l.prototype.PutQueueData=function(e,t){this.ssrcQueueMap.get(e).enqueue(t)},l.prototype.GetQueueLength=function(e){var t=this.ssrcQueueMap.get(e);return t?t.getLength():0},l.prototype.UpdateInfo=function(e,t){this.ssrcInfo.UpdateSSRCInfo(e,t)},l.prototype.GetFpsInfo=function(e){return this.ssrcInfo.GetSSRCFpsInfo(e)}}t.VideoInfoMGR=d,d.prototype={UpdateSSRCInfo:function(e,t){var i=this.ssrcInfoMap.get(e);i?i.UpdateVideoInfo(t):(i=new c,this.ssrcInfoMap.set(e,i),i.UpdateVideoInfo(t))},GetSSRCFpsInfo:function(e){var t=this.ssrcInfoMap.get(e);return t?t.GetVideoFpsInfo():0}};var f=function(){function e(){this.map=new r.default,this.AudioQueueMGR=new s,this.timemap=new r.default}return e.prototype.Add=function(e,t){this.map.set(e,t),this.AudioQueueMGR.AddQueue(e)},e.prototype.Clear=function(){this.map.clear()},e.prototype.Keys=function(){return this.map.keys()},e.prototype.UpdateSSRCTimeMap=function(e){this.timemap=e},e.prototype.GetSSRCTimeMap=function(e){return this.timemap?this.timemap.get(e):null},e}();function h(){this.map=new r.default,this.VideoQueueMGR=new l}function _(){this.map=new r.default,this.sQueue=new n.default}t.AudioMGR=f,h.prototype.Add=function(e,t){this.map.set(e,t)},h.prototype.Clear=function(){this.map.clear()},h.prototype.Keys=function(){return this.map.keys()},_.prototype.Add=function(e,t){this.map.set(e,t)},_.prototype.Get=function(e){return this.map.get(e)},_.prototype.PutData=function(e){e&&this.sQueue&&this.sQueue.enqueue(e)},_.prototype.GetData=function(){if(this.sQueue)return this.sQueue.dequeue()},_.prototype.ClearBuffer=function(){this.sQueue&&(this.sQueue=new n.default)}},function(e,t,i){"use strict";var o=i(3),r=i(19),n=i(9),a=i(15);e.exports=function(e){o(o.S,e,{from:function(e){var t,i,o,u,s=arguments[1];return r(this),(t=void 0!==s)&&r(s),null==e?new this:(i=[],t?(o=0,u=n(s,arguments[2],2),a(e,!1,function(e){i.push(u(e,o++))})):a(e,!1,i.push,i),new this(i))}})}},function(e,t,i){i(90)("Map")},function(e,t,i){"use strict";var o=i(3);e.exports=function(e){o(o.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},function(e,t,i){i(92)("Map")},function(e,t,i){var o=i(15);e.exports=function(e,t){var i=[];return o(e,!1,i.push,i,t),i}},function(e,t,i){var o=i(22),r=i(94);e.exports=function(e){return function(){if(o(this)!=e)throw TypeError(e+"#toJSON isn't generic");return r(this)}}},function(e,t,i){var o=i(3);o(o.P+o.R,"Map",{toJSON:i(95)("Map")})},function(e,t,i){var o=i(6),r=i(57),n=i(1)("species");e.exports=function(e){var t;return r(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!r(t.prototype)||(t=void 0),o(t)&&null===(t=t[n])&&(t=void 0)),void 0===t?Array:t}},function(e,t,i){var o=i(97);e.exports=function(e,t){return new(o(e))(t)}},function(e,t,i){var o=i(9),r=i(48),n=i(24),a=i(26),u=i(98);e.exports=function(e,t){var i=1==e,s=2==e,c=3==e,d=4==e,l=6==e,f=5==e||l,h=t||u;return function(t,u,_){for(var p,v,A=n(t),S=r(A),E=o(u,_,3),g=a(S.length),I=0,y=i?h(t,g):s?h(t,0):void 0;g>I;I++)if((f||I in S)&&(v=E(p=S[I],I,A),e))if(i)y[I]=v;else if(v)switch(e){case 3:return!0;case 5:return p;case 6:return I;case 2:y.push(p)}else if(d)return!1;return l?-1:c||d?d:y}}},function(e,t,i){"use strict";var o=i(2),r=i(3),n=i(32),a=i(10),u=i(8),s=i(35),c=i(15),d=i(37),l=i(6),f=i(16),h=i(4).f,_=i(99)(0),p=i(5);e.exports=function(e,t,i,v,A,S){var E=o[e],g=E,I=A?"set":"add",y=g&&g.prototype,D={};return p&&"function"==typeof g&&(S||y.forEach&&!a(function(){(new g).entries().next()}))?(g=t(function(t,i){d(t,g,e,"_c"),t._c=new E,null!=i&&c(i,A,t[I],t)}),_("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in y&&(!S||"clear"!=e)&&u(g.prototype,e,function(i,o){if(d(this,g,e),!t&&S&&!l(i))return"get"==e&&void 0;var r=this._c[e](0===i?0:i,o);return t?this:r})}),S||h(g.prototype,"size",{get:function(){return this._c.size}})):(g=v.getConstructor(t,e,A,I),s(g.prototype,i),n.NEED=!0),f(g,e),D[e]=g,r(r.G+r.W+r.F,D),S||v.setStrong(g,e,A),g}},function(e,t,i){"use strict";var o=i(4).f,r=i(41),n=i(35),a=i(9),u=i(37),s=i(15),c=i(42),d=i(68),l=i(60),f=i(5),h=i(32).fastKey,_=i(54),p=f?"_s":"size",v=function(e,t){var i,o=h(t);if("F"!==o)return e._i[o];for(i=e._f;i;i=i.n)if(i.k==t)return i};e.exports={getConstructor:function(e,t,i,c){var d=e(function(e,o){u(e,d,t,"_i"),e._t=t,e._i=r(null),e._f=void 0,e._l=void 0,e[p]=0,null!=o&&s(o,i,e[c],e)});return n(d.prototype,{clear:function(){for(var e=_(this,t),i=e._i,o=e._f;o;o=o.n)o.r=!0,o.p&&(o.p=o.p.n=void 0),delete i[o.i];e._f=e._l=void 0,e[p]=0},delete:function(e){var i=_(this,t),o=v(i,e);if(o){var r=o.n,n=o.p;delete i._i[o.i],o.r=!0,n&&(n.n=r),r&&(r.p=n),i._f==o&&(i._f=r),i._l==o&&(i._l=n),i[p]--}return!!o},forEach:function(e){_(this,t);for(var i,o=a(e,arguments.length>1?arguments[1]:void 0,3);i=i?i.n:this._f;)for(o(i.v,i.k,this);i&&i.r;)i=i.p},has:function(e){return!!v(_(this,t),e)}}),f&&o(d.prototype,"size",{get:function(){return _(this,t)[p]}}),d},def:function(e,t,i){var o,r,n=v(e,t);return n?n.v=i:(e._l=n={i:r=h(t,!0),k:t,v:i,p:o=e._l,n:void 0,r:!1},e._f||(e._f=n),o&&(o.n=n),e[p]++,"F"!==r&&(e._i[r]=n)),e},getEntry:v,setStrong:function(e,t,i){c(e,t,function(e,i){this._t=_(e,t),this._k=i,this._l=void 0},function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?d(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,d(1))},i?"entries":"values",!i,!0),l(t)}}},function(e,t,i){"use strict";var o=i(101),r=i(54);e.exports=i(100)("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=o.getEntry(r(this,"Map"),e);return t&&t.v},set:function(e,t){return o.def(r(this,"Map"),0===e?0:e,t)}},o,!0)},function(e,t,i){i(44),i(18),i(23),i(102),i(96),i(93),i(91),e.exports=i(0).Map},function(e,t,i){"use strict";i.r(t);var o=i(29),r=i(49);let n=null;if("function"==typeof AudioWorklet){class e extends AudioWorkletNode{constructor(e){super(e,"zoomAudioWorklet"),this.port.onmessage=this.handleMessage.bind(this)}handleMessage(e){var t=e.data;switch(t.status){case"delay":if(jsMediaEngineVariables.localAudioDecMGR){var i=jsMediaEngineVariables.localAudioDecMGR.map.get(0);i&&i.postMessage({command:"delay"})}break;case"captureAudio":r.Audio_Encode_Frame(0,t.data,t.data.length,0);break;case"InstantAudioTime":o.CurrentSSRCTime=t.data}}postData(e,t){this.port.postMessage({status:e,data:t},[t.data.buffer])}postCMD(e,t){this.port.postMessage({status:e,data:t})}}n=e}t.default=n},function(e,t,i){"use strict";var o,n;i(14)(i(58)),void 0===(n="function"==typeof(o=function(){function e(t,i,o){if(this.canvasElement=t,this.contextOptions=o,this.glInitSucceed=0,e.prototype.ROTATION_CLOCK0=0,e.prototype.ROTATION_CLOCK90=1,e.prototype.ROTATION_CLOCK180=2,e.prototype.ROTATION_CLOCK270=3,i||this.initContextGL(),this.contextGL){this.initProgram(),this.initBuffers(),this.initTextures();var r=new ArrayBuffer(4);this.dummpyCursor=new Uint8Array(r),this.glInitSucceed=this.contextGL.getError()?0:1,this.cursorWidth=0,this.cursorHeight=0,this.hasCursor=0,this.hasWholeFrame=0,this.croppingParams={},this.croppingParams.top=0,this.croppingParams.left=0,this.croppingParams.width=0,this.croppingParams.height=0,this.textureWidth=0,this.textureHeight=0,this.canvasWidth=0,this.canvasHeight=0,this.picRotation=-1,this.bgColor=[0,0,0],this.colorRange=-1}}return e.prototype.isWebGL=function(){return this.contextGL},e.prototype.initContextGL=function(){for(var e=this.canvasElement,t=null,i=["webgl","experimental-webgl","moz-webgl","webkit-3d"],o=0;!t&&o<i.length;){var r=i[o];try{t=this.contextOptions?e.getContext(r,this.contextOptions):e.getContext(r)}catch(e){t=null}t&&"function"==typeof t.getParameter||(t=null),++o}this.contextGL=t},e.prototype.initProgram=function(){var e=this.contextGL,t=["attribute vec4 vertexPos;","attribute vec4 texturePos;","varying vec2 textureCoord;","void main()","{","gl_Position = vertexPos;","textureCoord = texturePos.xy;","}"].join("\n"),i=["precision highp float;","varying highp vec2 textureCoord;","uniform sampler2D ySampler;","uniform sampler2D uSampler;","uniform sampler2D vSampler;","uniform sampler2D cursorSampler;","uniform vec4 cursorInfo;","uniform int colorRange;","const mat4 YUV2RGB_L = mat4","(","1.1643828125, 0, 1.59602734375, -.87078515625,","1.1643828125, -.39176171875, -.81296875, .52959375,","1.1643828125, 2.017234375, 0, -1.081390625,","0, 0, 0, 1",");","const mat4 YUV2RGB_F = mat4","(","1.0, 0, 1.402, -.701,","1.0, -.34413, -.71414, .529135,","1.0, 1.772, 0, -.886,","0, 0, 0, 1",");","void main(void) {","highp float y = texture2D(ySampler,  textureCoord).r;","highp float u = texture2D(uSampler,  textureCoord).r;","highp float v = texture2D(vSampler,  textureCoord).r;","vec4 c;","if (colorRange == 0)","{","  c = vec4(y, u, v, 1) * YUV2RGB_L;","} else {","  c = vec4(y, u, v, 1) * YUV2RGB_F;","}","if (cursorInfo.z > 0.0 && textureCoord.x >= cursorInfo.x && textureCoord.y >= cursorInfo.y && ","    textureCoord.x < cursorInfo.x+cursorInfo.z && textureCoord.y < cursorInfo.y+cursorInfo.w ){"," vec2 cursorCoord = textureCoord - cursorInfo.xy;"," cursorCoord /= cursorInfo.zw;"," vec4 cursor = texture2D(cursorSampler, cursorCoord);"," c = c*(1.0-cursor.a) + cursor*cursor.a;","}","gl_FragColor = c;","}"].join("\n"),o=e.createShader(e.VERTEX_SHADER);e.shaderSource(o,t),e.compileShader(o),e.getShaderParameter(o,e.COMPILE_STATUS);var r=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(r,i),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS);var n=e.createProgram();e.attachShader(n,o),e.attachShader(n,r),e.linkProgram(n),e.getProgramParameter(n,e.LINK_STATUS),e.useProgram(n),this.shaderProgram=n},e.prototype.initBuffers=function(){var e=this.contextGL,t=this.shaderProgram,i=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,i),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,1,-1,1,1,-1,-1,-1]),e.STATIC_DRAW);var o=e.getAttribLocation(t,"vertexPos");e.enableVertexAttribArray(o),e.vertexAttribPointer(o,2,e.FLOAT,!1,0,0),this.vertexPosBuffer=i;var r=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,r),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,0,0,0,1,1,0,1]),e.STATIC_DRAW);var n=e.getAttribLocation(t,"texturePos");e.enableVertexAttribArray(n),e.vertexAttribPointer(n,2,e.FLOAT,!1,0,0),this.texturePosBuffer=r},e.prototype.initTextures=function(){var e=this.contextGL,t=this.shaderProgram;e.pixelStorei(e.UNPACK_ALIGNMENT,1);var i=this.initTexture(),o=e.getUniformLocation(t,"ySampler");e.uniform1i(o,0),this.yTextureRef=i;var r=this.initTexture(),n=e.getUniformLocation(t,"uSampler");e.uniform1i(n,1),this.uTextureRef=r;var a=this.initTexture(),u=e.getUniformLocation(t,"vSampler");e.uniform1i(u,2),this.vTextureRef=a;var s=this.initTexture(),c=e.getUniformLocation(t,"cursorSampler");e.uniform1i(c,3),this.cursorTextureRef=s;var d=e.getUniformLocation(t,"cursorInfo");this.cursorInfoRef=d;var l=e.getUniformLocation(t,"colorRange");this.colorRangeRef=l},e.prototype.initTexture=function(){var e=this.contextGL,t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.bindTexture(e.TEXTURE_2D,null),t},e.prototype.cleanup=function(){if(this.glInitSucceed){var e=this.contextGL;e.deleteProgram(this.program),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE2),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE3),e.bindTexture(e.TEXTURE_2D,null),e.bindBuffer(e.ARRAY_BUFFER,null),e.deleteTexture(this.yTextureRef),e.deleteTexture(this.uTextureRef),e.deleteTexture(this.vTextureRef),e.deleteTexture(this.cursorTextureRef),e.deleteBuffer(this.vertexPosBuffer),e.deleteBuffer(this.texturePosBuffer),this.contextGL=null,this.glInitSucceed=0}},e.prototype.drawNextOutputPicture=function(e,t,i,o){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;this.contextGL?this.drawNextOuptutPictureGL(e,t,i,o,r):this.drawNextOuptutPictureRGBA(e,t,i,o)},e.prototype.drawNextOuptutPictureGL=function(e,t,i,o,r){var n=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],a=this.contextGL,u=(this.texturePosBuffer,this.yTextureRef),s=this.uTextureRef,c=this.vTextureRef;if(a&&this.glInitSucceed&&!(e<=0||t<=0||!o||!o.length||o.length!=e*t*3/2||i&&(i.top<0||i.left<0||i.left+i.width>e||i.top+i.height>t))){r=r||this.ROTATION_CLOCK0;var d=(i=i||{top:0,left:0,width:e,height:t}).width!=this.croppingParams.width||i.height!=this.croppingParams.height,l=i.top!=this.croppingParams.top||i.left!=this.croppingParams.left,f=a.canvas.width!=this.canvasWidth||a.canvas.height!=this.canvasHeight,h=e!=this.textureWidth||t!=this.textureHeight,_=r!=this.picRotation;(d||f||_)&&function(e,t,i,o){var r,n,a,u,s=e.contextGL,c=o==e.ROTATION_CLOCK90||o==e.ROTATION_CLOCK270?i:t,d=o==e.ROTATION_CLOCK90||o==e.ROTATION_CLOCK270?t:i,l=c/d*s.canvas.height,f=d/c*s.canvas.width;l>s.canvas.width?(r=0,a=1,u=1-(n=(s.canvas.height-f)/2/s.canvas.height)):(n=0,u=1,a=1-(r=(s.canvas.width-l)/2/s.canvas.width)),r=2*r-1,a=2*a-1,n=1-2*n,u=1-2*u;var h=new Float32Array([a,n,r,n,a,u,r,u]);s.bindBuffer(s.ARRAY_BUFFER,e.vertexPosBuffer),s.bufferData(s.ARRAY_BUFFER,h,s.DYNAMIC_DRAW)}(this,i.width,i.height,r),(d||l||h||_)&&function(e,t,i,o,r){var n=e.contextGL,a=o.top/i,u=o.left/t,s=a+o.height/i,c=u+o.width/t,d=[u,a,c,a,c,s,u,s];r==e.ROTATION_CLOCK90&&(d.unshift(d[6],d[7]),d=d.slice(0,8)),r==e.ROTATION_CLOCK180&&(d.unshift(d[4],d[5],d[6],d[7]),d=d.slice(0,8)),r==e.ROTATION_CLOCK270&&(d.push(d[0],d[1]),d=d.slice(2));var l=d[0],f=d[1];d[0]=d[2],d[1]=d[3],d[2]=l,d[3]=f;var h=new Float32Array(d);n.bindBuffer(n.ARRAY_BUFFER,e.texturePosBuffer),n.bufferData(n.ARRAY_BUFFER,h,n.DYNAMIC_DRAW)}(this,e,t,i,r);var p=n?0:1;p!=this.colorRange&&(a.uniform1i(this.colorRangeRef,p),this.colorRange=p),a.viewport(0,0,a.canvas.width,a.canvas.height),this.croppingParams=i,this.textureWidth=e,this.textureHeight=t,this.picRotation=r,this.canvasWidth=a.canvas.width,this.canvasHeight=a.canvas.height,a.clearColor(this.bgColor[0],this.bgColor[1],this.bgColor[2],255),a.clear(a.COLOR_BUFFER_BIT);var v=o,A=e*t,S=v.subarray(0,A);a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,u),a.texImage2D(a.TEXTURE_2D,0,a.LUMINANCE,e,t,0,a.LUMINANCE,a.UNSIGNED_BYTE,S);var E=e/2*t/2,g=v.subarray(A,A+E);a.activeTexture(a.TEXTURE1),a.bindTexture(a.TEXTURE_2D,s),a.texImage2D(a.TEXTURE_2D,0,a.LUMINANCE,e/2,t/2,0,a.LUMINANCE,a.UNSIGNED_BYTE,g);var I=E,y=v.subarray(A+E,A+E+I);a.activeTexture(a.TEXTURE2),a.bindTexture(a.TEXTURE_2D,c),a.texImage2D(a.TEXTURE_2D,0,a.LUMINANCE,e/2,t/2,0,a.LUMINANCE,a.UNSIGNED_BYTE,y),a.activeTexture(a.TEXTURE3),a.bindTexture(a.TEXTURE_2D,this.cursorTextureRef),this.hasCursor||a.texImage2D(a.TEXTURE_2D,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,this.dummpyCursor),a.uniform4f(this.cursorInfoRef,0,0,0,0),a.drawArrays(a.TRIANGLE_STRIP,0,4),this.hasWholeFrame=1}},e.prototype.updateTextureBlock=function(e,t,i,o,r){var n=this.contextGL;if(n&&this.glInitSucceed){var a=r;if(!(!this.hasWholeFrame||e<=0||t<=0||i<0||o<0)&&r&&r.length==e*t*3/2){var u=this.yTextureRef,s=this.uTextureRef,c=this.vTextureRef,d=e*t,l=a.subarray(0,d);n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,u),n.texSubImage2D(n.TEXTURE_2D,0,i,o,e,t,n.LUMINANCE,n.UNSIGNED_BYTE,l);var f=e/2*t/2,h=a.subarray(d,d+f);n.activeTexture(n.TEXTURE1),n.bindTexture(n.TEXTURE_2D,s),n.texSubImage2D(n.TEXTURE_2D,0,i/2,o/2,e/2,t/2,n.LUMINANCE,n.UNSIGNED_BYTE,h);var _=f,p=a.subarray(d+f,d+f+_);n.activeTexture(n.TEXTURE2),n.bindTexture(n.TEXTURE_2D,c),n.texSubImage2D(n.TEXTURE_2D,0,i/2,o/2,e/2,t/2,n.LUMINANCE,n.UNSIGNED_BYTE,p)}}},e.prototype.updateCursor=function(e,t,i){var o=this.contextGL;o&&this.glInitSucceed&&(e<=0||t<=0||!i||i.length!=e*t*4||(o.activeTexture(o.TEXTURE3),o.bindTexture(o.TEXTURE_2D,this.cursorTextureRef),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,e,t,0,o.RGBA,o.UNSIGNED_BYTE,i),this.cursorWidth=e,this.cursorHeight=t,this.hasCursor=1))},e.prototype.draw=function(e,t,i,o,r){var n=this.contextGL;if(n&&this.glInitSucceed&&!(!this.hasWholeFrame||e&&(o<0||r<0))){this.texturePosBuffer;var a=this.yTextureRef,u=this.uTextureRef,s=this.vTextureRef,c=this.cursorTextureRef;if(n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,a),n.activeTexture(n.TEXTURE1),n.bindTexture(n.TEXTURE_2D,u),n.activeTexture(n.TEXTURE2),n.bindTexture(n.TEXTURE_2D,s),n.activeTexture(n.TEXTURE3),n.bindTexture(n.TEXTURE_2D,c),e&&this.hasCursor){var d=t/this.croppingParams.width,l=i/this.croppingParams.height,f=o/this.croppingParams.width,h=r/this.croppingParams.height;n.uniform4f(this.cursorInfoRef,d,l,f,h)}else n.uniform4f(this.cursorInfoRef,0,0,0,0);n.drawArrays(n.TRIANGLE_STRIP,0,4)}},e.prototype.clear=function(){var e=this.contextGL;e&&this.glInitSucceed&&(e.clearColor(this.bgColor[0],this.bgColor[1],this.bgColor[2],255),e.clear(e.COLOR_BUFFER_BIT),this.hasWholeFrame=0,this.hasCursor=0)},e.prototype.test_changeColorRange=function(e){var t=this.contextGL;t&&this.glInitSucceed&&(colorRange=e?0:1,colorRange!=this.colorRange&&(t.uniform1i(this.colorRangeRef,colorRange),this.colorRange=colorRange,this.draw(0)))},e.prototype.drawNextOuptutPictureRGBA=function(e,t,i,o){var r=o,n=this.canvasElement.getContext("2d"),a=n.getImageData(0,0,e,t);a.data.set(r),n.putImageData(a,0,0)},e})?o.apply(t,[]):o)||(e.exports=n)},function(e,t,i){i(31)("observable")},function(e,t,i){i(31)("asyncIterator")},function(e,t,i){var o=i(12),r=i(56).f,n={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"[object Window]"==n.call(e)?function(e){try{return r(e)}catch(e){return a.slice()}}(e):r(o(e))}},function(e,t,i){var o=i(27),r=i(34),n=i(28);e.exports=function(e){var t=o(e),i=r.f;if(i)for(var a,u=i(e),s=n.f,c=0;u.length>c;)s.call(e,a=u[c++])&&t.push(a);return t}},function(e,t,i){"use strict";var o=i(2),r=i(11),n=i(5),a=i(3),u=i(71),s=i(32).KEY,c=i(10),d=i(39),l=i(16),f=i(25),h=i(1),_=i(33),p=i(31),v=i(109),A=i(57),S=i(7),E=i(6),g=i(12),I=i(46),y=i(20),D=i(41),m=i(108),R=i(74),C=i(4),P=i(27),T=R.f,M=C.f,O=m.f,b=o.Symbol,N=o.JSON,x=N&&N.stringify,U=h("_hidden"),V=h("toPrimitive"),L={}.propertyIsEnumerable,w=d("symbol-registry"),G=d("symbols"),W=d("op-symbols"),F=Object.prototype,k="function"==typeof b,K=o.QObject,B=!K||!K.prototype||!K.prototype.findChild,H=n&&c(function(){return 7!=D(M({},"a",{get:function(){return M(this,"a",{value:7}).a}})).a})?function(e,t,i){var o=T(F,t);o&&delete F[t],M(e,t,i),o&&e!==F&&M(F,t,o)}:M,j=function(e){var t=G[e]=D(b.prototype);return t._k=e,t},Q=k&&"symbol"==typeof b.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof b},J=function(e,t,i){return e===F&&J(W,t,i),S(e),t=I(t,!0),S(i),r(G,t)?(i.enumerable?(r(e,U)&&e[U][t]&&(e[U][t]=!1),i=D(i,{enumerable:y(0,!1)})):(r(e,U)||M(e,U,y(1,{})),e[U][t]=!0),H(e,t,i)):M(e,t,i)},X=function(e,t){S(e);for(var i,o=v(t=g(t)),r=0,n=o.length;n>r;)J(e,i=o[r++],t[i]);return e},q=function(e){var t=L.call(this,e=I(e,!0));return!(this===F&&r(G,e)&&!r(W,e))&&(!(t||!r(this,e)||!r(G,e)||r(this,U)&&this[U][e])||t)},Y=function(e,t){if(e=g(e),t=I(t,!0),e!==F||!r(G,t)||r(W,t)){var i=T(e,t);return!i||!r(G,t)||r(e,U)&&e[U][t]||(i.enumerable=!0),i}},z=function(e){for(var t,i=O(g(e)),o=[],n=0;i.length>n;)r(G,t=i[n++])||t==U||t==s||o.push(t);return o},Z=function(e){for(var t,i=e===F,o=O(i?W:g(e)),n=[],a=0;o.length>a;)!r(G,t=o[a++])||i&&!r(F,t)||n.push(G[t]);return n};k||(u((b=function(){if(this instanceof b)throw TypeError("Symbol is not a constructor!");var e=f(arguments.length>0?arguments[0]:void 0),t=function(i){this===F&&t.call(W,i),r(this,U)&&r(this[U],e)&&(this[U][e]=!1),H(this,e,y(1,i))};return n&&B&&H(F,e,{configurable:!0,set:t}),j(e)}).prototype,"toString",function(){return this._k}),R.f=Y,C.f=J,i(56).f=m.f=z,i(28).f=q,i(34).f=Z,n&&!i(17)&&u(F,"propertyIsEnumerable",q,!0),_.f=function(e){return j(h(e))}),a(a.G+a.W+a.F*!k,{Symbol:b});for(var $="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ee=0;$.length>ee;)h($[ee++]);for(var te=P(h.store),ie=0;te.length>ie;)p(te[ie++]);a(a.S+a.F*!k,"Symbol",{for:function(e){return r(w,e+="")?w[e]:w[e]=b(e)},keyFor:function(e){if(!Q(e))throw TypeError(e+" is not a symbol!");for(var t in w)if(w[t]===e)return t},useSetter:function(){B=!0},useSimple:function(){B=!1}}),a(a.S+a.F*!k,"Object",{create:function(e,t){return void 0===t?D(e):X(D(e),t)},defineProperty:J,defineProperties:X,getOwnPropertyDescriptor:Y,getOwnPropertyNames:z,getOwnPropertySymbols:Z}),N&&a(a.S+a.F*(!k||c(function(){var e=b();return"[null]"!=x([e])||"{}"!=x({a:e})||"{}"!=x(Object(e))})),"JSON",{stringify:function(e){for(var t,i,o=[e],r=1;arguments.length>r;)o.push(arguments[r++]);if(i=t=o[1],(E(t)||void 0!==e)&&!Q(e))return A(t)||(t=function(e,t){if("function"==typeof i&&(t=i.call(this,e,t)),!Q(t))return t}),o[1]=t,x.apply(N,o)}}),b.prototype[V]||i(8)(b.prototype,V,b.prototype.valueOf),l(b,"Symbol"),l(Math,"Math",!0),l(o.JSON,"JSON",!0)},function(e,t,i){i(110),i(44),i(107),i(106),e.exports=i(0).Symbol},function(e,t,i){e.exports=i(111)},function(e,t,i){i(18),i(23),e.exports=i(33).f("iterator")},function(e,t,i){e.exports=i(113)},function(e,t,i){var o=i(72);function r(e,t,i,r,n,a,u){try{var s=e[a](u),c=s.value}catch(e){return void i(e)}s.done?t(c):o.resolve(c).then(r,n)}e.exports=function(e){return function(){var t=this,i=arguments;return new o(function(o,n){var a=e.apply(t,i);function u(e){r(a,o,n,u,s,"next",e)}function s(e){r(a,o,n,u,s,"throw",e)}u(void 0)})}}},function(e,t,i){"use strict";var o=i(27),r=i(34),n=i(28),a=i(24),u=i(48),s=Object.assign;e.exports=!s||i(10)(function(){var e={},t={},i=Symbol(),o="abcdefghijklmnopqrst";return e[i]=7,o.split("").forEach(function(e){t[e]=e}),7!=s({},e)[i]||Object.keys(s({},t)).join("")!=o})?function(e,t){for(var i=a(e),s=arguments.length,c=1,d=r.f,l=n.f;s>c;)for(var f,h=u(arguments[c++]),_=d?o(h).concat(d(h)):o(h),p=_.length,v=0;p>v;)l.call(h,f=_[v++])&&(i[f]=h[f]);return i}:s},function(e,t,i){var o=i(3);o(o.S+o.F,"Object",{assign:i(116)})},function(e,t,i){i(117),e.exports=i(0).Object.assign},function(e,t,i){e.exports=i(118)},function(e,t){!function(t){"use strict";var i,o=Object.prototype,r=o.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",u=n.asyncIterator||"@@asyncIterator",s=n.toStringTag||"@@toStringTag",c="object"==typeof e,d=t.regeneratorRuntime;if(d)c&&(e.exports=d);else{(d=t.regeneratorRuntime=c?e.exports:{}).wrap=g;var l="suspendedStart",f="suspendedYield",h="executing",_="completed",p={},v={};v[a]=function(){return this};var A=Object.getPrototypeOf,S=A&&A(A(b([])));S&&S!==o&&r.call(S,a)&&(v=S);var E=m.prototype=y.prototype=Object.create(v);D.prototype=E.constructor=m,m.constructor=D,m[s]=D.displayName="GeneratorFunction",d.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===D||"GeneratorFunction"===(t.displayName||t.name))},d.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,s in e||(e[s]="GeneratorFunction")),e.prototype=Object.create(E),e},d.awrap=function(e){return{__await:e}},R(C.prototype),C.prototype[u]=function(){return this},d.AsyncIterator=C,d.async=function(e,t,i,o){var r=new C(g(e,t,i,o));return d.isGeneratorFunction(t)?r:r.next().then(function(e){return e.done?e.value:r.next()})},R(E),E[s]="Generator",E[a]=function(){return this},E.toString=function(){return"[object Generator]"},d.keys=function(e){var t=[];for(var i in e)t.push(i);return t.reverse(),function i(){for(;t.length;){var o=t.pop();if(o in e)return i.value=o,i.done=!1,i}return i.done=!0,i}},d.values=b,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=i,this.done=!1,this.delegate=null,this.method="next",this.arg=i,this.tryEntries.forEach(M),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=i)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function o(o,r){return u.type="throw",u.arg=e,t.next=o,r&&(t.method="next",t.arg=i),!!r}for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var n=o;break}}n&&("break"===e||"continue"===e)&&n.tryLoc<=t&&t<=n.finallyLoc&&(n=null);var a=n?n.completion:{};return a.type=e,a.arg=t,n?(this.method="next",this.next=n.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),M(i),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var o=i.completion;if("throw"===o.type){var r=o.arg;M(i)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,o){return this.delegate={iterator:b(e),resultName:t,nextLoc:o},"next"===this.method&&(this.arg=i),p}}}function g(e,t,i,o){var r=t&&t.prototype instanceof y?t:y,n=Object.create(r.prototype),a=new O(o||[]);return n._invoke=function(e,t,i){var o=l;return function(r,n){if(o===h)throw new Error("Generator is already running");if(o===_){if("throw"===r)throw n;return N()}for(i.method=r,i.arg=n;;){var a=i.delegate;if(a){var u=P(a,i);if(u){if(u===p)continue;return u}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(o===l)throw o=_,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);o=h;var s=I(e,t,i);if("normal"===s.type){if(o=i.done?_:f,s.arg===p)continue;return{value:s.arg,done:i.done}}"throw"===s.type&&(o=_,i.method="throw",i.arg=s.arg)}}}(e,i,a),n}function I(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}function y(){}function D(){}function m(){}function R(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function C(e){var t;this._invoke=function(i,o){function n(){return new Promise(function(t,n){!function t(i,o,n,a){var u=I(e[i],e,o);if("throw"!==u.type){var s=u.arg,c=s.value;return c&&"object"==typeof c&&r.call(c,"__await")?Promise.resolve(c.__await).then(function(e){t("next",e,n,a)},function(e){t("throw",e,n,a)}):Promise.resolve(c).then(function(e){s.value=e,n(s)},function(e){return t("throw",e,n,a)})}a(u.arg)}(i,o,t,n)})}return t=t?t.then(n,n):n()}}function P(e,t){var o=e.iterator[t.method];if(o===i){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=i,P(e,t),"throw"===t.method))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var r=I(o,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,p;var n=r.arg;return n?n.done?(t[e.resultName]=n.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=i),t.delegate=null,p):n:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function b(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,n=function t(){for(;++o<e.length;)if(r.call(e,o))return t.value=e[o],t.done=!1,t;return t.value=i,t.done=!0,t};return n.next=n}}return{next:N}}function N(){return{value:i,done:!0}}}(function(){return this}()||Function("return this")())},function(e,t,i){var o=function(){return this}()||Function("return this")(),r=o.regeneratorRuntime&&Object.getOwnPropertyNames(o).indexOf("regeneratorRuntime")>=0,n=r&&o.regeneratorRuntime;if(o.regeneratorRuntime=void 0,e.exports=i(120),r)o.regeneratorRuntime=n;else try{delete o.regeneratorRuntime}catch(e){o.regeneratorRuntime=void 0}},function(e,t,i){e.exports=i(121)},function(e,t,i){"use strict";var o=i(3),r=i(36),n=i(62);o(o.S,"Promise",{try:function(e){var t=r.f(this),i=n(e);return(i.e?t.reject:t.resolve)(i.v),t.promise}})},function(e,t,i){"use strict";var o=i(3),r=i(0),n=i(2),a=i(64),u=i(61);o(o.P+o.R,"Promise",{finally:function(e){var t=a(this,r.Promise||n.Promise),i="function"==typeof e;return this.then(i?function(i){return u(t,e()).then(function(){return i})}:e,i?function(i){return u(t,e()).then(function(){throw i})}:e)}})},function(e,t,i){var o=i(2).navigator;e.exports=o&&o.userAgent||""},function(e,t,i){var o=i(2),r=i(63).set,n=o.MutationObserver||o.WebKitMutationObserver,a=o.process,u=o.Promise,s="process"==i(21)(a);e.exports=function(){var e,t,i,c=function(){var o,r;for(s&&(o=a.domain)&&o.exit();e;){r=e.fn,e=e.next;try{r()}catch(o){throw e?i():t=void 0,o}}t=void 0,o&&o.enter()};if(s)i=function(){a.nextTick(c)};else if(!n||o.navigator&&o.navigator.standalone)if(u&&u.resolve){var d=u.resolve(void 0);i=function(){d.then(c)}}else i=function(){r.call(o,c)};else{var l=!0,f=document.createTextNode("");new n(c).observe(f,{characterData:!0}),i=function(){f.data=l=!l}}return function(o){var r={fn:o,next:void 0};t&&(t.next=r),e||(e=r,i()),t=r}}},function(e,t){e.exports=function(e,t,i){var o=void 0===i;switch(t.length){case 0:return o?e():e.call(i);case 1:return o?e(t[0]):e.call(i,t[0]);case 2:return o?e(t[0],t[1]):e.call(i,t[0],t[1]);case 3:return o?e(t[0],t[1],t[2]):e.call(i,t[0],t[1],t[2]);case 4:return o?e(t[0],t[1],t[2],t[3]):e.call(i,t[0],t[1],t[2],t[3])}return e.apply(i,t)}},function(e,t,i){"use strict";var o,r,n,a,u=i(17),s=i(2),c=i(9),d=i(22),l=i(3),f=i(6),h=i(19),_=i(37),p=i(15),v=i(64),A=i(63).set,S=i(126)(),E=i(36),g=i(62),I=i(125),y=i(61),D=s.TypeError,m=s.process,R=m&&m.versions,C=R&&R.v8||"",P=s.Promise,T="process"==d(m),M=function(){},O=r=E.f,b=!!function(){try{var e=P.resolve(1),t=(e.constructor={})[i(1)("species")]=function(e){e(M,M)};return(T||"function"==typeof PromiseRejectionEvent)&&e.then(M)instanceof t&&0!==C.indexOf("6.6")&&-1===I.indexOf("Chrome/66")}catch(e){}}(),N=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},x=function(e,t){if(!e._n){e._n=!0;var i=e._c;S(function(){for(var o=e._v,r=1==e._s,n=0,a=function(t){var i,n,a,u=r?t.ok:t.fail,s=t.resolve,c=t.reject,d=t.domain;try{u?(r||(2==e._h&&L(e),e._h=1),!0===u?i=o:(d&&d.enter(),i=u(o),d&&(d.exit(),a=!0)),i===t.promise?c(D("Promise-chain cycle")):(n=N(i))?n.call(i,s,c):s(i)):c(o)}catch(e){d&&!a&&d.exit(),c(e)}};i.length>n;)a(i[n++]);e._c=[],e._n=!1,t&&!e._h&&U(e)})}},U=function(e){A.call(s,function(){var t,i,o,r=e._v,n=V(e);if(n&&(t=g(function(){T?m.emit("unhandledRejection",r,e):(i=s.onunhandledrejection)?i({promise:e,reason:r}):(o=s.console)&&o.error&&o.error("Unhandled promise rejection",r)}),e._h=T||V(e)?2:1),e._a=void 0,n&&t.e)throw t.v})},V=function(e){return 1!==e._h&&0===(e._a||e._c).length},L=function(e){A.call(s,function(){var t;T?m.emit("rejectionHandled",e):(t=s.onrejectionhandled)&&t({promise:e,reason:e._v})})},w=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),x(t,!0))},G=function(e){var t,i=this;if(!i._d){i._d=!0,i=i._w||i;try{if(i===e)throw D("Promise can't be resolved itself");(t=N(e))?S(function(){var o={_w:i,_d:!1};try{t.call(e,c(G,o,1),c(w,o,1))}catch(e){w.call(o,e)}}):(i._v=e,i._s=1,x(i,!1))}catch(e){w.call({_w:i,_d:!1},e)}}};b||(P=function(e){_(this,P,"Promise","_h"),h(e),o.call(this);try{e(c(G,this,1),c(w,this,1))}catch(e){w.call(this,e)}},(o=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=i(35)(P.prototype,{then:function(e,t){var i=O(v(this,P));return i.ok="function"!=typeof e||e,i.fail="function"==typeof t&&t,i.domain=T?m.domain:void 0,this._c.push(i),this._a&&this._a.push(i),this._s&&x(this,!1),i.promise},catch:function(e){return this.then(void 0,e)}}),n=function(){var e=new o;this.promise=e,this.resolve=c(G,e,1),this.reject=c(w,e,1)},E.f=O=function(e){return e===P||e===a?new n(e):r(e)}),l(l.G+l.W+l.F*!b,{Promise:P}),i(16)(P,"Promise"),i(60)("Promise"),a=i(0).Promise,l(l.S+l.F*!b,"Promise",{reject:function(e){var t=O(this);return(0,t.reject)(e),t.promise}}),l(l.S+l.F*(u||!b),"Promise",{resolve:function(e){return y(u&&this===a?P:this,e)}}),l(l.S+l.F*!(b&&i(59)(function(e){P.all(e).catch(M)})),"Promise",{all:function(e){var t=this,i=O(t),o=i.resolve,r=i.reject,n=g(function(){var i=[],n=0,a=1;p(e,!1,function(e){var u=n++,s=!1;i.push(void 0),a++,t.resolve(e).then(function(e){s||(s=!0,i[u]=e,--a||o(i))},r)}),--a||o(i)});return n.e&&r(n.v),i.promise},race:function(e){var t=this,i=O(t),o=i.reject,r=g(function(){p(e,!1,function(e){t.resolve(e).then(i.resolve,o)})});return r.e&&o(r.v),i.promise}})},function(e,t){e.exports=function(){}},function(e,t,i){"use strict";var o=i(129),r=i(68),n=i(13),a=i(12);e.exports=i(42)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,i=this._i++;return!e||i>=e.length?(this._t=void 0,r(1)):r(0,"keys"==t?i:"values"==t?e[i]:[i,e[i]])},"values"),n.Arguments=n.Array,o("keys"),o("values"),o("entries")},function(e,t,i){var o=i(11),r=i(24),n=i(40)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=r(e),o(e,n)?e[n]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,i){var o=i(43),r=Math.max,n=Math.min;e.exports=function(e,t){return(e=o(e))<0?r(e+t,0):n(e,t)}},function(e,t,i){var o=i(12),r=i(26),n=i(132);e.exports=function(e){return function(t,i,a){var u,s=o(t),c=r(s.length),d=n(a,c);if(e&&i!=i){for(;c>d;)if((u=s[d++])!=u)return!0}else for(;c>d;d++)if((e||d in s)&&s[d]===i)return e||d||0;return!e&&-1}}},function(e,t,i){var o=i(4),r=i(7),n=i(27);e.exports=i(5)?Object.defineProperties:function(e,t){r(e);for(var i,a=n(t),u=a.length,s=0;u>s;)o.f(e,i=a[s++],t[i]);return e}},function(e,t,i){"use strict";var o=i(41),r=i(20),n=i(16),a={};i(8)(a,i(1)("iterator"),function(){return this}),e.exports=function(e,t,i){e.prototype=o(a,{next:r(1,i)}),n(e,t+" Iterator")}},function(e,t,i){var o=i(43),r=i(47);e.exports=function(e){return function(t,i){var n,a,u=String(r(t)),s=o(i),c=u.length;return s<0||s>=c?e?"":void 0:(n=u.charCodeAt(s))<55296||n>56319||s+1===c||(a=u.charCodeAt(s+1))<56320||a>57343?e?u.charAt(s):n:e?u.slice(s,s+2):a-56320+(n-55296<<10)+65536}}},function(e,t,i){i(44),i(18),i(23),i(128),i(124),i(123),e.exports=i(0).Promise},function(e,t,i){var o=i(3);o(o.S+o.F*!i(5),"Object",{defineProperty:i(4).f})},function(e,t,i){i(138);var o=i(0).Object;e.exports=function(e,t,i){return o.defineProperty(e,t,i)}},function(e,t,i){e.exports=i(139)},function(e,t,i){var o=i(3),r=i(0),n=i(10);e.exports=function(e,t){var i=(r.Object||{})[e]||Object[e],a={};a[e]=t(i),o(o.S+o.F*n(function(){i(1)}),"Object",a)}},function(e,t,i){var o=i(12),r=i(74).f;i(141)("getOwnPropertyDescriptor",function(){return function(e,t){return r(o(e),t)}})},function(e,t,i){i(142);var o=i(0).Object;e.exports=function(e,t){return o.getOwnPropertyDescriptor(e,t)}},function(e,t,i){e.exports=i(143)},function(e,t,i){"use strict";var o=i(75),r=i(14),n=r(i(72)),a=r(i(122)),u=r(i(119)),s=r(i(115)),c=r(i(58)),d=r(i(105)),l=r(i(104)),f=r(i(30)),h=o(i(53)),_=o(i(51)),p=o(i(29)),v=o(i(49)),A=i(76),S=(0,r(i(50)).default)("sdk"),E=function(){this.audioCtx=new(window.AudioContext||window.webkitAudioContext),this.audioPlayNode=null,this.audioRecordNode=null,this.videoRenderArray=[],this.videoCaptureValue=null,this.audioRenderArray=[],this.audioCapture=null,this.display=[],this.AudioMediaStream=null,this.VideoMediaStram=null,this.isMediaStart=!1,this.sampleRate=this.audioCtx.sampleRate,this.videoRenderIntervalHandle=null,this.audionodebuffersize=this.sampleRate<=32e3||f.default.browser.isSafari?2048:1024,this.audionoderecordbuffersize=2048,this.lastresidual=null,this.currentactive=0,this.currentVideoWidth=0,this.currentVideoHeight=0,this.audioPlay=!1,this.sharingInterval=null,this.sharingIntervalTime=100,this.sharingDisplay=null,this.videorenderinterval=10,this.videoRenderLevel=10,this.videoRenderLevelCount=1,this.renderPeriodTotal=100,this.renderPeriodCount=0,this.renderPeriodTotalFps=0,this.renderPeriodFpsCount=0,this.videoBeforeAudioCount=0,this.videoAfterAudioCount=0,this.lastRenderAudioTimeStamp=0,this.videoBufEmptyCount=0,this.videoBufCount=0,this.videoRenderMaxLevel=15,this.cursorCanvas=document.createElement("canvas"),this.isSetCursor=!1,this.captureAudioStatus=h.AUDIO_ILLEGAL,this.logon=!1,this.canvas=null,this.firstSetDelay=!0,this.Cursorx=null,this.Cursory=null,this.CursorWidth=null,this.CursorHeight=null,this.isSupportThread="object"===("undefined"==typeof WebAssembly?"undefined":(0,c.default)(WebAssembly))&&"function"==typeof Worker,this.isStartVideoThread=!1,this.isStartAudioThread=!1,this.isStartSharingThread=!1,this.isSupportAudioWorklet="function"==typeof AudioWorklet,this.isCaputureNodeConnect=!1,this.audioWorkletJsPath=null,this.xratio=1,this.yratio=1,this.videoCaptureInterval=0,this.isStartVideoCapture=!1,this.videoCaptureWidth=0,this.videoCaptureHeight=0,this.videoCaptureContext=null,this.captureVideoOutputCanvasDomList=[],this.isVideoCaptureLoadedmetadata=!1,this.VALUE_CACHE_FOR_START_CAPTURE_VIDEO={},this.isMediaDevicesGetUserMediaNow=!1};E.prototype={JsMediaSDK_Log:function(e){this.logon},JsMediaSDK_PreLoad:function(e,t){this.isSupportThread&&(this.audioWorkletJsPath=e.audioWorkerPath,_.Notify_APPUI||(_.Notify_APPUI=t),v.SetTotalEvent(e),e.videoDecWorkerPath&&(this.isStartVideoThread=!0,e.handle=this,v.JsVideoEngine_PreInit(e)),e.audioDecWorkerPath&&(this.isStartAudioThread=!0,v.JsAudioEngine_PreInit(e)),e.imageDecWorkerPath&&(this.isStartSharingThread=!0,v.JsSharingEngine_PreInit(e)))},JsMediaSDK_Init:function(e,t){if(this.isSupportThread){if(e.logon&&(this.logon=e.logon),this.isStartVideoThread&&e.video_rwc_ip_address){var i={log:e.logon,confId:e.user_id||e.userid};v.JsVideoEngine_Init(e.video_rwc_ip_address,i)}if(this.isStartAudioThread&&e.audio_rwc_ip_address){var o={sampleRate:this.audioCtx.sampleRate,userid:e.user_id||e.userid,log:e.logon};v.JsAudioEngine_Init(e.audio_rwc_ip_address,o)}if(this.isStartSharingThread&&e.sharing_rwc_ip_address){var r={log:e.logon,userid:e.user_id||e.userid};v.JsSharingEngine_Init(e.sharing_rwc_ip_address,r)}_.Notify_APPUI||(_.Notify_APPUI=t)}},JsMediaSDK_UnInit:function(){v.JsAudioEngine_UnInit(),v.JsVideoEngine_UnInit(),v.JsSharingEngine_UnInit(),this.videoRenderArray&&this.videoRenderArray.forEach(function(e){e.display&&(e.display.cleanup(),e.display=null)}),_.Notify_APPUI=null},StartAudioMediaCapture:function(){this.EndAudioMediaStream();var e,t=null;this.audioCapture&&(t=this.audioCapture.AudioSelectValue),e={audio:!!this.audioCapture&&{deviceId:t?{exact:t}:void 0,autoGainControl:!1},video:!1};var i=this.handleAudioCapture.bind(this),o=this.handleAudioError.bind(this);navigator.mediaDevices.getUserMedia(e).then(i,o)},StartVideoMediaCapture:function(){var e=(0,s.default)(a.default.mark(function e(){var t,i,o,r,n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.EndVideoMediaStream(),t=null,i=null,null,this.videoCaptureValue&&(t=this.videoCaptureValue.VideoSelectValue),o=!!this.videoCaptureValue&&(!!f.default.browser.isSafari||{width:this.videoCaptureValue.width?this.videoCaptureValue.width:320,height:this.videoCaptureValue.height?this.videoCaptureValue.height:180,deviceId:t?{exact:t}:void 0}),S("try to getusermedia",i={audio:!1,video:o}),e.prev=9,r=this.videoCaptureValue,this.isMediaDevicesGetUserMediaNow=!0,e.prev=12,e.next=15,navigator.mediaDevices.getUserMedia(i);case 15:n=e.sent,e.next=23;break;case 18:return e.prev=18,e.t0=e.catch(12),e.next=22,navigator.mediaDevices.getUserMedia((0,u.default)({},i,{video:!0}));case 22:n=e.sent;case 23:return this.isMediaDevicesGetUserMediaNow=!1,S("mediaStream is ok"),this.videoCaptureValue=r,e.next=28,this.handleVideoCapture(n);case 28:e.sent&&_.Notify_APPUI(h.START_VIDEO_CAPTURE_SUCCESS,null),e.next=35;break;case 32:e.prev=32,e.t1=e.catch(9),this.handleVideoError(e.t1);case 35:case"end":return e.stop()}},e,this,[[9,32],[12,18]])}));return function(){return e.apply(this,arguments)}}(),Start_Audio_Play:function(){if(this.audioPlay=!0,this.isSupportAudioWorklet)p.AudioNode&&p.AudioNode.postCMD("startPlayAudio",null);else if(this.audioPlayNode&&this.audioCtx)this.audioPlayNode.connect(this.audioCtx.destination);else{this.audioPlayNode=this.audioCtx.createScriptProcessor(this.audionodebuffersize,1,1);var e=this;this.audioPlayNode.onaudioprocess=function(t){e.JsMediaSDK_OnAudioprocess(t)},this.audioPlayNode.connect(this.audioCtx.destination)}v.UpdateAudioPlayStatus(!0)},Stop_Audio_Play:function(){if(v.UpdateAudioPlayStatus(!1),this.isSupportAudioWorklet)p.AudioNode&&p.AudioNode.postCMD("stopPlayAudio",null);else if(this.audioPlay=!1,this.audioPlayNode)try{this.audioPlayNode.disconnect(this.audioCtx.destination)}catch(e){this.JsMediaSDK_Log(e)}},Remove_Audio_Play:function(){if(v.UpdateAudioPlayStatus(!1),this.audioPlay=!1,this.isSupportAudioWorklet)p.AudioNode&&p.AudioNode.postCMD("stopPlayAudio",null);else if(this.audioPlayNode){try{this.audioPlayNode.disconnect(this.audioCtx.destination)}catch(e){this.JsMediaSDK_Log(e)}this.audioPlayNode=null}},Meeting_Fail_Over:function(e,t){v.Meeting_Fail_Over(e,t)},Start_Audio_Capture:function(){if(v.Notify_Audio_Thread_Status(_.SPECIAL_ID,h.AUDIO_START),!(this.audioRecordNode&&this.audioCtx.destination&&this.AudioMediaStream))if(this.AudioMediaStream){var e=this.audioCtx.createMediaStreamSource(this.AudioMediaStream);if(this.isSupportAudioWorklet)this.isCaputureNodeConnect||(e.connect(p.AudioNode),p.AudioNode.postCMD("StartCaptureAudio",null),this.isCaputureNodeConnect=!0);else{this.audioRecordNode=this.audioCtx.createScriptProcessor(this.audionoderecordbuffersize,1,1),e.connect(this.audioRecordNode),this.audioRecordNode.connect(this.audioCtx.destination);var t=this;this.audioRecordNode.onaudioprocess=function(e){if(t.captureAudioStatus===h.AUDIO_REMOVE);else{var i=e.inputBuffer.getChannelData(0),o=new Float32Array(i);v.Audio_Encode_Frame(t.audioCapture.ssrc,o,i.length,0)}}}}else this.StartAudioMediaCapture(),this.captureAudioStatus=h.AUDIO_START},Stop_Audio_Capture:function(){this.captureAudioStatus=h.AUDIO_STOP,v.Notify_Audio_Thread_Status(_.SPECIAL_ID,h.AUDIO_STOP)},Start_Video_Capture:function(){var e=this;if(this.VideoMediaStram){var t=this;return new n.default(function(i,o){t.videoCaptureValue.videoCtrl.addEventListener("loadedmetadata",function e(i){t.isVideoCaptureLoadedmetadata=!0;var o=t.videoCaptureValue.videoCtrl.videoWidth,r=t.videoCaptureValue.videoCtrl.videoHeight;t.videoCaptureValue.canvasCtrl.width=o,t.videoCaptureValue.canvasCtrl.height=r,t.videoCaptureWidth=o,t.videoCaptureHeight=r,t.videoCaptureContext=t.videoCaptureValue.canvasCtrl.getContext("2d"),t.captureVideoOutputCanvasDomList.forEach(function(e){e.width=o,e.height=r}),v.Notify_Video_Encode_Thread({command:"startVideoEncode",width:o,height:r,fps:t.videoCaptureValue.fps,ssid:t.videoCaptureValue.ssid}),_.Notify_APPUI(h.CURRENT_CAPTURE_VIDEO_WIDTH_HEIGHT,{width:o,height:r}),t.videoCaptureValue.videoCtrl.removeEventListener("loadedmetadata",e)}),setTimeout(function(){e.VideoMediaStram?!1===e.VideoMediaStram.active?o(new A.CameraOccupiedError("VideoMediaStram.active equals false")):i(!0):o(!1)},1e3),t.videoCaptureValue.videoCtrl.setAttribute("playsinline",!0);try{t.videoCaptureValue.videoCtrl.srcObject=t.VideoMediaStram}catch(i){t.videoCaptureValue.videoCtrl.src=URL.createObjectURL(e.VideoMediaStram)}t.videoCaptureValue.videoCtrl.play()})}this.StartVideoMediaCapture()},Stop_Video_Capture:function(){v.Notify_Video_Encode_Thread({command:"stopVideoEncode"}),this.isStartVideoCapture=!1,this.isVideoCaptureLoadedmetadata=!1,clearInterval(this.videoCaptureInterval),this.videoCaptureInterval=0,this.EndVideoMediaStream(),this.videoCaptureValue&&this.videoCaptureValue.videoCtrl&&this.videoCaptureValue.videoCtrl.pause(),this.videoCaptureValue=null},Remove_Video_Capture:function(){clearInterval(this.videoCaptureInterval),this.videoCaptureInterval=0,this.EndVideoMediaStream(),this.videoCaptureValue=null,this.videoCaptureValue.videoCtrl&&this.videoCaptureValue.videoCtrl.pause()},Process_Video:function(){if(this.videoCaptureValue){var e=this.videoCaptureValue.videoCtrl,t=this.videoCaptureWidth,i=this.videoCaptureHeight,o=this.captureVideoOutputCanvasDomList.map(function(e){return e.getContext("2d")})[0];if(this.isVideoCaptureLoadedmetadata&&e){this.captureVideoOutputCanvasDomList.forEach(function(o){o.ctxCache||(o.ctxCache=o.getContext("2d")),o.ctxCache.drawImage(e,0,0,t,i,0,0,t,i)});var r=o.getImageData(0,0,t,i);v.Video_Encode_Frame(_.SPECIAL_ID,r.data,r.data.length,0)}}},Remove_Audio_Capture:function(){if(v.Notify_Audio_Thread_Status(_.SPECIAL_ID,h.AUDIO_REMOVE),this.captureAudioStatus=h.AUDIO_REMOVE,this.firstSetDelay=!0,this.audioRecordNode){try{this.audioRecordNode.disconnect(this.audioCtx.destination)}catch(e){this.JsMediaSDK_Log(e)}this.audioRecordNode=null}},Start_Video_Play:function(){v.UpdateVideoPlayStatus(!0),this.videoRenderIntervalHandle||(this.videoRenderIntervalHandle=this.JsMediaSDK_VideoRenderInterval(this.videorenderinterval))},Stop_Video_Play:function(){v.UpdateVideoPlayStatus(!1),v.Clear_Decoded_Video_Frame(),this.videoRenderIntervalHandle&&(clearInterval(this.videoRenderIntervalHandle),this.videoRenderIntervalHandle=null)},Remove_Video_Play:function(){v.UpdateVideoPlayStatus(!1),this.videoRenderIntervalHandle&&(clearInterval(this.videoRenderIntervalHandle),this.videoRenderIntervalHandle=null)},EndMedia:function(){this.AudioMediaStream&&(this.AudioMediaStream.getTracks().forEach(function(e){e.stop()}),this.AudioMediaStream=null),this.Remove_Audio_Play(),this.Remove_Audio_Capture(),this.Remove_Video_Play(),this.audioCtx&&(this.audioCtx.close(),this.audioCtx=null)},EndAudioMediaStream:function(){this.AudioMediaStream&&(this.AudioMediaStream.getTracks().forEach(function(e){e.stop()}),this.AudioMediaStream=null)},EndVideoMediaStream:function(){this.VideoMediaStram&&(this.VideoMediaStram.getTracks().forEach(function(e){e.stop()}),this.VideoMediaStram=null)},UnMuteAudio:function(){this.captureAudioStatus=h.AUDIO_START,v.Notify_Audio_Thread_Status(_.SPECIAL_ID,h.AUDIO_START)},MuteAudio:function(){this.Stop_Audio_Capture()},handleAudioCapture:function(e){_.Notify_APPUI(h.USER_GRANT_CAPTURE_AUDIO,null),this.AudioMediaStream=e,this.Start_Audio_Capture()},handleVideoCapture:function(e){var i,t=this;return new n.default((i=(0,s.default)(a.default.mark(function i(o,r){var n;return a.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(e){i.next=2;break}return i.abrupt("return",r(new Error("no stream")));case 2:return t.VideoMediaStram=e,i.prev=3,i.next=6,t.Start_Video_Capture();case 6:n=i.sent,o(n),i.next=13;break;case 10:i.prev=10,i.t0=i.catch(3),r(new Error("media stream is ok, but start video capture fail"));case 13:case"end":return i.stop()}},i,this,[[3,10]])})),function(e,t){return i.apply(this,arguments)}))},handleAudioError:function(e){this.AudioMediaStream=null,_.Notify_APPUI(h.USER_FORBIDDED_CAPTURE_AUDIO,null)},handleVideoError:function(e){S("handleVideoError",e),e instanceof A.CameraOccupiedError||e.name&&-1!==["NotReadableError","SourceUnavailableError"].indexOf(e.name)?_.Notify_APPUI(h.USER_CAMERA_IS_TAKEN_BY_OTHER_PROGRAMS,null):_.Notify_APPUI(h.USER_FORBIDDED_CAPTURE_VIDEO,null),this.Stop_Video_Capture()},switchCanvasForVideoCapture:function(e){var t=this.videoCaptureValue.videoCtrl.videoWidth,i=this.videoCaptureValue.videoCtrl.videoHeight,o=[].concat(e),r=o[0];o.forEach(function(e){e.width=t,e.height=i}),this.captureVideoOutputCanvasDomList=o,this.videoCaptureValue.canvasCtrl=r,this.videoCaptureValue.canvasCtrl.width=t,this.videoCaptureValue.canvasCtrl.height=i,this.videoCaptureContext=r.getContext("2d")},Notify_MeidaSDK:function(e,t){var i=this;S(e,t);var o=0;switch(e){case h.START_MEDIA:this.isMediaStart=!0,this.StartAudioMediaCapture();break;case h.ADD_RENDER_VIDEO:for(o=0;o<this.videoRenderArray.length;o++)if(this.videoRenderArray[o].ssrc==t.ssrc)return;this.currentVideoWidth=0,this.currentVideoHeight=0,this.videoRenderArray.push(t),t.display=new d.default(t.canvas),this.canvas=t.canvas,this.Start_Video_Play();break;case h.STOP_RENDER_VIDEO:for(o=0;o<this.videoRenderArray.length;o++)this.videoRenderArray[o].ssrc==t.ssrc&&(this.videoRenderArray[o].display&&this.videoRenderArray[o].display.cleanup(),this.videoRenderArray[o].display=null,this.videoRenderArray.splice(o,1),0==this.videoRenderArray.length&&this.Stop_Video_Play());break;case h.SWITCH_CANVAS_FOR_VIDEO_CAPTURE:var r=[];t instanceof Array?r=t:r.push(t);var a=this.videoCaptureValue.canvasCtrlList.filter(function(e){return-1!==r.indexOf(e.k)}).map(function(e){return e.dom});this.switchCanvasForVideoCapture(a);break;case h.START_CAPTURE_VIDEO:if(!this.isStartVideoCapture){if(this.VALUE_CACHE_FOR_START_CAPTURE_VIDEO=(0,u.default)({},t),this.isStartVideoCapture=!0,t.canvasCtrlList=[],t.canvas instanceof Array)for(o=0;o<t.canvas.length;o++)t.canvasCtrlList.push({k:t.canvas[o],dom:f.default.getDocumentHandle(t.canvas[o])});else t.canvasCtrlList.push({k:t.canvas,dom:f.default.getDocumentHandle(t.canvas)});t.canvasCtrl=t.canvasCtrlList[0].dom,this.captureVideoOutputCanvasDomList=[].concat(t.canvasCtrl),t.videoCtrl=f.default.getDocumentHandle(t.video),this.videoCaptureValue=t,this.Start_Video_Capture()}break;case h.STOP_CAPTURE_VIDEO:var s=this;return new n.default(function(e,t){try{if(i.isMediaDevicesGetUserMediaNow)return _.Notify_APPUI(h.STOP_VIDEO_CAPTURE_FAILED,null),t(new Error("Too many calls : the device is opening camera now, cannot stop video capture"));s.isStartVideoCapture&&s.Stop_Video_Capture(),_.Notify_APPUI(h.STOP_VIDEO_CAPTURE_SUCCESS,null),e(!0)}catch(e){_.Notify_APPUI(h.STOP_VIDEO_CAPTURE_FAILED,null),t(e)}});case h.ADD_RENDER_AUDIO:0==this.audioRenderArray.length&&(this.audioRenderArray.push(t),this.Start_Audio_Play());break;case h.STOP_RENDER_AUDIO:if(this.audioRenderArray.length>0)for(this.Stop_Audio_Play(),o=0;o<this.audioRenderArray.length;o++)this.audioRenderArray[o].ssrc==t.ssrc&&this.audioRenderArray.splice(o,1);break;case h.UNMUTE_AUDIO:this.UnMuteAudio();break;case h.MUTE_AUDIO:this.MuteAudio();break;case h.START_SHARING:this.sharingInterval||(this.sharingInterval=this.JsMediaSDK_SharingRenderInterval(this.sharingIntervalTime),this.sharingDisplay=new d.default(t.canvas)),v.UpdateSharingPlayStatus(!0);break;case h.STOP_SHARING:v.UpdateSharingPlayStatus(!1),this.sharingInterval&&(clearInterval(this.sharingInterval),this.sharingInterval=0),v.ClearSharingBuffer(),this.sharingDisplay&&(this.sharingDisplay.clear(),this.sharingDisplay.cleanup(),this.sharingDisplay=null);break;case h.CHANGE_FRAME_RATE:case h.CHANGE_VIDEO_RESOLUTION:case h.CHANGE_AUDIO_SPEAKER:break;case h.CHANGE_VIDEO_CAPTURE_DEVICE:var c=(0,u.default)({},this.VALUE_CACHE_FOR_START_CAPTURE_VIDEO,t);if(this.Stop_Video_Capture(),!this.isStartVideoCapture){if(this.isStartVideoCapture=!0,c.canvasCtrlList=[],c.canvas instanceof Array)for(o=0;o<c.canvas.length;o++)c.canvasCtrlList.push({k:c.canvas[o],dom:f.default.getDocumentHandle(c.canvas[o])});else c.canvasCtrlList.push({k:c.canvas,dom:f.default.getDocumentHandle(c.canvas)});c.canvasCtrl=c.canvasCtrlList[0].dom,c.videoCtrl=f.default.getDocumentHandle(c.video),this.videoCaptureValue=c,this.Start_Video_Capture()}break;case h.CHANGE_CURRENT_ACTIVE_SSRC:this.currentactive!=t.ssrc&&(v.Clear_Decoded_Video_Frame(),this.currentactive=t.ssrc,p.CurrentSSRC=this.currentactive,v.Notify_Audio_Thread_CurrentSSRC(p.CurrentSSRC));break;case h.LEAVE_MEETING:this.Stop_Audio_Play();break;case h.MEETING_FAIL_OVER:this.Meeting_Fail_Over(t.audio_websocket_address,t.video_websocket_address);break;case h.END_MEDIA:this.EndMedia();break;case h.CHANGE_AUDIO_MIC:if(this.audioCapture&&t){var A=this.audioPlay;this.Remove_Audio_Play(),this.Remove_Audio_Capture(),this.EndAudioMediaStream();try{this.audioCtx&&(this.audioCtx.close(),this.isCaputureNodeConnect=!1),p.AudioNode=null,this.audioCtx=new(window.AudioContext||window.webkitAudioContext),this.audioCtx.sampleRate!=this.sampleRate&&(this.sampleRate=this.audioCtx.sampleRate,v.Modify_Audio_SampleRate(this.sampleRate)),this.isSupportAudioWorklet?(s=this,this.audioCtx.audioWorklet.addModule(s.audioWorkletJsPath).then(function(){p.AudioNode=new l.default(s.audioCtx),p.AudioNode.connect(s.audioCtx.destination);var e=new MessageChannel,i=new MessageChannel;p.AudioNode.port.postMessage({status:"encodeAudioPort"},[i.port2]),p.AudioNode.port.postMessage({status:"decodeAudioPort"},[e.port1]),v.Notify_Audio_Thread_Msg_Channel(e,i),A&&s.Start_Audio_Play(),s.audioCapture=t,s.Start_Audio_Capture(),v.Reset_Aec()})):(A&&this.Start_Audio_Play(),this.audioCapture=t,this.Start_Audio_Capture(),v.Reset_Aec())}catch(e){this.JsMediaSDK_Log(e)}}return;case h.WEBRTC_RESTART:t&&(this.EndAudioMediaStream(),this.Remove_Audio_Capture(),this.audioCapture=t,this.Start_Audio_Capture(),v.Reset_Aec());break;case h.LEAVE_COMPUTER_AUDIO:this.Remove_Audio_Capture(),this.Remove_Audio_Play(),this.EndAudioMediaStream();try{p.AudioNode&&(p.AudioNode.port=null)}catch(e){S("AudioNode.port",e)}p.AudioNode=null,this.audioCtx&&(this.audioCtx.close(),this.isCaputureNodeConnect=!1),this.audioCtx=null,this.audioCapture=null,this.audioPlay=!1;break;case h.JOIN_COMPUTER_AUDIO:try{this.Remove_Audio_Play(),this.Remove_Audio_Capture(),this.EndAudioMediaStream(),this.audioCtx&&(this.audioCtx.close(),this.isCaputureNodeConnect=!1),this.audioCtx=new(window.AudioContext||window.webkitAudioContext),this.audioCtx.sampleRate!=this.sampleRate&&(this.sampleRate=this.audioCtx.sampleRate,v.Modify_Audio_SampleRate(this.sampleRate)),this.isSupportAudioWorklet?(s=this,this.audioCtx.audioWorklet.addModule(s.audioWorkletJsPath).then(function(){p.AudioNode=new l.default(s.audioCtx),p.AudioNode.connect(s.audioCtx.destination);var e=new MessageChannel,o=new MessageChannel;p.AudioNode.port.postMessage({status:"encodeAudioPort"},[o.port2]),p.AudioNode.port.postMessage({status:"decodeAudioPort"},[e.port1]),v.Notify_Audio_Thread_Msg_Channel(e,o),s.Start_Audio_Play(),t.CaptureAudio&&(s.audioCapture=t.CaptureAudioInfo,s.Start_Audio_Capture(),i.firstSetDelay&&(i.firstSetDelay=!1,v.Reset_Aec(),v.Set_Aec_Delay()))})):(this.Start_Audio_Play(),t.CaptureAudio&&(this.audioCapture=t.CaptureAudioInfo,this.Start_Audio_Capture(),this.firstSetDelay&&(this.firstSetDelay=!1,v.Reset_Aec(),v.Set_Aec_Delay())))}catch(e){this.JsMediaSDK_Log(e)}}},JsMediaSDK_OnAudioprocess:function(e){if(this.audioPlay){var t=e.outputBuffer.numberOfChannels,i=v.Get_Decoded_Audio_Frame(0,0,this.audionodebuffersize);if(i){i.length<this.audionodebuffersize&&this.JsMediaSDK_Log("Audio is Not enough! length:"+i.length);for(var o=0;o<t;o++){(n=e.outputBuffer.getChannelData(o)).set(i);for(var r=i.length;r<this.audionodebuffersize;r++)n[r]=0}}else for(this.JsMediaSDK_Log("Active Queue  audio:"+v.Get_Decoded_Audio_Buffer_Length()),o=0;o<t;++o){var n=e.outputBuffer.getChannelData(o),a=new Uint8Array(n.length);n.set(a)}}},JsMediaSDK_VideoRender:function(){var e=0;if(this.videoRenderLevelCount==this.videoRenderLevel){if(this.videoRenderLevelCount=1,0!=this.videoRenderArray.length)for(e=0;e<this.videoRenderArray.length;e++){var t,i;if(t=this.isSupportAudioWorklet?p.CurrentSSRCTime:v.Get_SSRC_Latest_Time(this.currentactive),this.lastresidual?(i=this.lastresidual,this.lastresidual=null):i=v.Get_Decoded_Video_Frame(this.currentactive,0),i){if(this.videoBufEmptyCount=0,this.videoBufCount=v.Get_Decoded_Video_Buffer_Length(this.currentactive),this.renderPeriodCount==this.renderPeriodTotal){var o=this.renderPeriodTotalFps/this.renderPeriodFpsCount;o&&0!=o||(o||this.JsMediaSDK_Log("fps error"),o=100);var r=Math.round(o/this.videorenderinterval);this.videoRenderLevel<r&&this.videoRenderLevel++,this.renderPeriodCount=0,this.renderPeriodTotalFps=0,this.videoAfterAudioCount=0,this.videoBeforeAudioCount=0,this.renderPeriodFpsCount=0}this.renderPeriodCount++;var n=v.Get_SSRC_VIDEO_FPS(this.currentactive);0!=n&&(this.renderPeriodFpsCount++,this.renderPeriodTotalFps+=n),this.JsMediaSDK_Log("fps is: "+n+"Queue Length is : "+this.videoBufCount);var a=t-i.ntptime;0!=i.ntptime&&0!=t&&(a>0&&a<=1e3||a<0&&a>=-1e3||(a<-1e3?this.lastRenderAudioTimeStamp!=t&&(this.videoRenderLevel-=1):this.lastRenderAudioTimeStamp!=t&&(this.videoRenderLevel+=1)),this.lastRenderAudioTimeStamp=t);var u={top:i.r_x,left:i.r_y,height:i.r_h,width:i.r_w};this.currentVideoHeight==u.width&&this.currentVideoWidth==u.height||(_.Notify_APPUI(h.CURRENT_VIDEO_RESOLUTION,{width:u.width,height:u.height}),this.canvas.width=u.width,this.canvas.height=u.height,this.currentVideoHeight=u.width,this.currentVideoWidth=u.height),i.yuvdata.length==i.width*i.height*3/2&&i.r_x>=0&&i.r_y>=0&&i.r_x+i.r_w<=i.width&&i.r_y+i.r_h<=i.height&&this.videoRenderArray[e].display.drawNextOuptutPictureGL(i.width,i.height,u,i.yuvdata,i.rotation,i.yuv_limited)}else this.videoBufEmptyCount++,this.videoRenderLevel+=1,this.JsMediaSDK_Log("Decelerator is "+this.videoRenderLevel),this.videoBufEmptyCount=0,this.JsMediaSDK_Log("video buffer is empty");this.videoBufCount*this.videoRenderLevel*10>150&&(this.videoRenderLevel-=1,this.JsMediaSDK_Log("Accelerator is "+this.videoRenderLevel)),this.videoRenderLevel<1?this.videoRenderLevel=1:this.videoRenderLevel>this.videoRenderMaxLevel&&(this.videoRenderLevel=this.videoRenderMaxLevel)}}else this.videoRenderLevelCount++},JsMediaSDK_SharingRender:function(){var e=this;if(this.sharingDisplay){for(var t=v.Get_Sharing_Data();t;){if("image"===t.type)0==t.Block?this.sharingDisplay.drawNextOuptutPictureGL(t.image.width,t.image.height,null,t.image.buffer):this.sharingDisplay.updateTextureBlock(t.image.width,t.image.height,t.posx,t.posy,t.image.buffer);else if("cursorImage"===t.type){var i;!function(){var o=new Image;i=e,o.onload=function(){i.cursorCanvas.width=o.width,i.cursorCanvas.height=o.height;var e=i.cursorCanvas.getContext("2d");e.drawImage(o,0,0);var t=e.getImageData(0,0,o.width,o.height),r=new Uint8Array(t.data.buffer);i.isSetCursor||(i.isSetCursor=!0),i.sharingDisplay.updateCursor(o.width,o.height,r),o=null},o.src="data:image/png;base64,"+window.btoa(v.Uint8ToString(t.data))}()}else if("cursorImagePos"===t.type)this.Cursorx=t.data.x*this.xratio,this.Cursory=t.data.y*this.yratio,this.CursorWidth=t.data.width*this.xratio,this.CursorHeight=t.data.height*this.yratio;else if("sharingPara"===t.type){var o=t.data.body.logicHeight,r=t.data.body.logicWidth,n=t.data.body.height,a=t.data.body.width;this.xratio=a/r,this.yratio=n/o}t=v.Get_Sharing_Data()}this.isSetCursor?this.sharingDisplay.draw(1,this.Cursorx,this.Cursory,this.CursorWidth,this.CursorHeight):this.sharingDisplay.draw(0,this.Cursorx,this.Cursory,this.CursorWidth,this.CursorHeight)}},JsMediaSDK_VideoRenderInterval:function(e){var t=this.JsMediaSDK_VideoRender.bind(this);return setInterval(t,e)},JsMediaSDK_SharingRenderInterval:function(e){var t=this.JsMediaSDK_SharingRender.bind(this);return setInterval(t,e)}},e.exports=E},function(e,t,i){"use strict";var o=i(145);e.exports=o}])});